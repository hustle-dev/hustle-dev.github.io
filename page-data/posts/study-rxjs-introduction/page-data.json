{"componentChunkName":"component---src-templates-post-post-tsx","path":"/posts/study-rxjs-introduction/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"rxjs란\">RxJS란?</h2>\n<p>RxJS는 웹 개발 시 이벤트를 다루거나, 프레임워크, 라이브러리, 유틸리티 등에 적용할 수 있는 함수형 접근방식으로 가장 인기있는 라이브러리 중 하나이다. 그러나 RxJS와 리액티브 프로그래밍은 기존에 우리가 사용하던 명령형과 선언형 프로그래밍과 방식이 달라 배우는데 어렵다.</p>\n<blockquote>\n<p>그러나 배우는 것은 어렵지만 그만한 노력이 있다고 한다.</p>\n</blockquote>\n<p>그럼 한번 RxJS 입문서를 통해 RxJS가 무엇인지 알아가보자.</p>\n<h2 id=\"옵저버블\">옵저버블</h2>\n<p>옵저버블은 시간의 흐름에 따라 도착하는 스트림, 또는 데이터의 출처를 의미한다.</p>\n<blockquote>\n<p>이벤트를 예시로 들면 마우스의 움직임, 버튼 클릭, 텍스트 필드를 채워넣는 행위, 라우트 변경 등을 의미한다.</p>\n</blockquote>\n<p>RxJS에서 마우스 클릭 이벤트 옵저버블을 만드는 예시</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// fromEvent 연산자를 가져온다.</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> fromEvent <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rxjs'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 버튼 참조</span>\n<span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'myButton'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 버튼 클릭 옵저버블을 생성한다.</span>\n<span class=\"token keyword\">const</span> myObservable <span class=\"token operator\">=</span> <span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 옵저버블을 만들어두었지만 아직은 아무 행동을 하지 않는다.</p>\n<p>→ <strong>옵저버블이 cold하거나 subscription이 있기 전까지는 활성화되지 않기 때문</strong>이다.</p>\n<h2 id=\"subscription\">Subscription</h2>\n<p>Subscriptions은 모든것을 동작하게 하는데, 수도꼭지에서 손잡이를 돌리면 물(옵저버블)이 흐르듯이 이러한 역할을 하게 하는것이 <code class=\"language-text\">subscriber</code>이다.</p>\n<blockquote>\n<p>이를 위해, <code class=\"language-text\">observer</code>라고 부르는 함수와 함께 <code class=\"language-text\">subscribe</code> 메서드를 호출해야 한다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// fromEvent 연산자를 가져온다.</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> fromEvent <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rxjs'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 버튼 참조</span>\n<span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'myButton'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 버튼 클릭 옵저버블을 생성한다.</span>\n<span class=\"token keyword\">const</span> myObservable <span class=\"token operator\">=</span> <span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// subscribe 메서드를 옵저버블과 함께 호출한다.</span>\n<span class=\"token keyword\">const</span> subscription <span class=\"token operator\">=</span> myObservable<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 예제에서 <code class=\"language-text\">myObservable.subscribe</code>가 하는 역할은 다음과 같다.</p>\n<ul>\n<li>버튼 클릭 이벤트에 대한 이벤트 리스너 설정</li>\n<li>매 클릭 이벤트마다 <code class=\"language-text\">subscribe</code> 메서드와 함께 넘겨준 함수 (observer) 실행 → 위에서는 콘솔 실행 콜백이 observer가 됨</li>\n<li>적절한 이벤트 리스너 삭제와 같은 일을 하는 <code class=\"language-text\">unsubscribe</code>와 함께 <code class=\"language-text\">Subscription</code> 객체 반환</li>\n</ul>\n<p><code class=\"language-text\">Subscribe</code> 메서드는 함수 대신 다음과 같이 객체를 넘겨 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> subscription <span class=\"token operator\">=</span> myObservable<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 이벤트 발생 성공 시</span>\n  <span class=\"token function-variable function\">next</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 에러,</span>\n  <span class=\"token function-variable function\">error</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 완료되면,</span>\n  <span class=\"token function-variable function\">complete</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'complete!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>각각의 subscription이 새로운 실행 컨텍스트를 생성한다는 것에 유의하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 첫 번째</span>\n<span class=\"token keyword\">const</span> subscription <span class=\"token operator\">=</span> myObservable<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 두번째</span>\n<span class=\"token keyword\">const</span> secondSubscription <span class=\"token operator\">=</span> myObservable<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// unsubscribe를 사용해서 삭제</span>\nsubscription<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsecondSubscription<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>일반적으로 Subscription은 옵저버블과 옵저버사이에 1대1인 데이터흐름을 만들어낸다.(unicasting)</p>\n<ul>\n<li>unicasting: 1대1로 옵저버블이 옵저버에게 알리는것</li>\n<li>multicasting: 컨퍼런스처럼 한명의 옵저버블과 수많은 옵저버 형식으로 이루어진것</li>\n</ul>\n<blockquote>\n<p>RxJS를 “이벤트계의 lodash”로 만들어 준 것은 연산자(Operators) 때문인데 이를 한번 알아보자.</p>\n</blockquote>\n<h2 id=\"연산자operators\">연산자(operators)</h2>\n<p>연산자는 원본데이터를 조작하여 옵저버블로 변환된 값을 제공한다. 예시를 한번 봐보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">of</span><span class=\"token punctuation\">,</span> map <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rxjs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> dataSource <span class=\"token operator\">=</span> <span class=\"token keyword\">of</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Observable { _subscribe: [Function (anonymous)] }</span>\n\n<span class=\"token keyword\">const</span> subscription <span class=\"token operator\">=</span> dataSource<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> value <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2 3 4 5 6</span></code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">of</code> 을 통해 값을 순차적으로 전달하고, dataSource를 콘솔로 찍어보면 옵저버블이 반환된다. 이후 이를 가지고 <strong>연산자들은 <code class=\"language-text\">pipe</code> 내부에 존재해야해서 <code class=\"language-text\">pipe</code>안에서 <code class=\"language-text\">map</code>을 통해 방출된 값을 바꾸고 이 옵저버블을 <code class=\"language-text\">subscribe</code></strong> 한다.</p>\n</blockquote>\n<p>대부분의 경우 문제를 해결해줄 수 있는 연산자가 RxJS에 존재하는데, 이런 수많은 연산자의 갯수에 압도당하지 말고 잘 사용하자.</p>\n<h2 id=\"파이프\">파이프</h2>\n<p>파이프함수는 연산자 조립 라인으로 데이터를 조작, 필터링, 변환시킬 수 있는 파이프라고 불리는 과정을 거치게 된다. <code class=\"language-text\">pipe</code> 함수 안에서는 옵저버블 체인을 이용하여 5개혹은 그 이상의 연산자를 사용하는 일도 가능하다.</p>\n<p>옵저버블을 활용한 자동완성 기능</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">inputValue\n  <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// 200ms 정지</span>\n    <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 값이 똑같은면, 무시.</span>\n    <span class=\"token function\">distinctUntilChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 아직 요청중일 때 업데이트된 값이 수신되는 경우, 이전 요청을 취소하고 새로운 옵저버블로 '변경'</span>\n    <span class=\"token function\">switchMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">searchTerm</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> typeaheadApi<span class=\"token punctuation\">.</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span>searchTerm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// subscription 생성.</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">results</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// dom 업데이트</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"연산자들의-종류\">연산자들의 종류</h2>\n<p>자신이 필요한 연산자를 찾기 위해서는 관련 카테고리를 찾는것이 중요하다. 관련 카테고리로는 아래와 같은 것들이 있다.</p>\n<ul>\n<li>생성 연산자(fromEvent, of, from)</li>\n<li>조합 연산자(combineLatest, concat, merge, startWith, withLatestFrom)</li>\n<li>에러 핸들링 연산자(catchError)</li>\n<li>필터링 연산자(take, debounceTime, distinctUntilChanged, filter, takeUntil)</li>\n<li>멀티캐스팅 연산자(shareReplay)</li>\n<li>변환 연산자(concatMap, map, mergeMap, scan, switchMap)</li>\n</ul>\n<p>이후 개발 시 필요한 연산자들은 찾아보면서 개발하면 될것 같다.</p>","frontmatter":{"date":"22.07.13","description":"RxJS 입문서를 보고 간단하게 정리한 글입니다.","heroImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABcElEQVR42o2TT0sCQRjG9xB0FzoFfYS69BUi8NQnKAj6Ch061UmJhDxEYEGHEDukXQSJ2AXLchNsEyr7gyWEpImLm+7SurvzhK5uq8usOzDMzM47v/d5n51hMNIIIdZI4GxEN/73iTOCGYURO0zW8BXg8byRRj31Dr2l9qFkKDkVOKSs1QHnP0Fyahe3zA6EyTCqczH85msOpa4KjX7gx1EBmzMhRGb3wa8kUV04Q40J420xAVFSzHjDQ8kDYGadRXxiGw/BbG9ttDvQhDqqfAWZZJHqo9PDPvBz6wZFJgQ5UzGBqt4b2UgO8WDaUugKtJdB6goavgikVRbGt1li66WBqD+Kx9SrmUQ3PCi0Ga6elyFOH0L0HaC5xiE/fwxu6RRtUfFWMmwBA6V6uQklkIO0fIHG3j20H5X6Q6jXxspOOWTZQjx4OARVNTRjl1DuSpCvniAlsq6w8UBNh3xdhCKUer07736jvRIq0O3AuL0/Wx/cV4UEJ7gAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/52c26d6399c505c1588b269ed3b55a32/4a806/heroImage.png","srcSet":"/static/52c26d6399c505c1588b269ed3b55a32/f48d2/heroImage.png 270w,\n/static/52c26d6399c505c1588b269ed3b55a32/5d6d7/heroImage.png 540w,\n/static/52c26d6399c505c1588b269ed3b55a32/4a806/heroImage.png 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"},"sources":[{"srcSet":"/static/52c26d6399c505c1588b269ed3b55a32/f9186/heroImage.webp 270w,\n/static/52c26d6399c505c1588b269ed3b55a32/25c40/heroImage.webp 540w,\n/static/52c26d6399c505c1588b269ed3b55a32/984df/heroImage.webp 1080w","type":"image/webp","sizes":"(min-width: 1080px) 1080px, 100vw"}]},"width":1080,"height":720}}},"heroImageAlt":"RxJS 로고","tags":["학습"],"title":"RxJS 학습하기"},"tableOfContents":"<ul>\n<li><a href=\"#rxjs%EB%9E%80\">RxJS란?</a></li>\n<li><a href=\"#%EC%98%B5%EC%A0%80%EB%B2%84%EB%B8%94\">옵저버블</a></li>\n<li><a href=\"#subscription\">Subscription</a></li>\n<li><a href=\"#%EC%97%B0%EC%82%B0%EC%9E%90operators\">연산자(operators)</a></li>\n<li><a href=\"#%ED%8C%8C%EC%9D%B4%ED%94%84\">파이프</a></li>\n<li><a href=\"#%EC%97%B0%EC%82%B0%EC%9E%90%EB%93%A4%EC%9D%98-%EC%A2%85%EB%A5%98\">연산자들의 종류</a></li>\n</ul>"}},"pageContext":{"id":"1b9ee74e-9e64-5287-9604-2d63cee621ad","frontmatter__slug":"/study-rxjs-introduction","previous":"/translate-ts-3-5","previousTitle":"TypeScript 3.5 번역","next":"/setting-pure-ts-dev","nextTitle":"순수 TS 개발환경 설정하기"}},"staticQueryHashes":["1485575810"],"slicesMap":{}}