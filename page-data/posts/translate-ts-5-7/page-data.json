{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/translate-ts-5-7/","result":{"data":{"markdownRemark":{"html":"<!-- 썸네일 -->\n<!-- 본문 -->\n<blockquote>\n<p>TypeScript 5.7에서 중요하다고 생각되는 부분을 번역했습니다. 더 자세한 글은 아래 원글 링크를 참고해주세요.\r\n<a href=\"https://devblogs.microsoft.com/typescript/announcing-typescript-5-7/\">https://devblogs.microsoft.com/typescript/announcing-typescript-5-7/</a></p>\n</blockquote>\n<h2 id=\"초기화되지-않은-변수에-대한-검사\">초기화되지 않은 변수에 대한 검사</h2>\n<p>이전부터 타입스크립트는 모든 분기에서 변수가 초기화되지 않은 문제를 감지할 수 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\r\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">someCondition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    result <span class=\"token operator\">=</span> <span class=\"token function\">doSomeWork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> temporaryWork <span class=\"token operator\">=</span> <span class=\"token function\">doSomeWork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    temporaryWork <span class=\"token operator\">*=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\">// forgot to assign to 'result'</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// error: Variable 'result' is used before being assigned.</span></code></pre></div>\n<p>하지만 아래와 같이 변수가 별도의 함수내에서 접근되는 경우 제대로 작동하지 않았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">someCondition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        result <span class=\"token operator\">=</span> <span class=\"token function\">doSomeWork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">let</span> temporaryWork <span class=\"token operator\">=</span> <span class=\"token function\">doSomeWork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        temporaryWork <span class=\"token operator\">*=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// forgot to assign to 'result'</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">printResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">printResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// no error here.</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n</code></pre></div>\n<p>TypeScript 5.7은 이제 초기화되지 않은 변수에 대해서는 오류를 보고한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\r\n    \r\n    <span class=\"token comment\">// do work, but forget to assign to 'result'</span>\r\n\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">printResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// error: Variable 'result' is used before being assigned.</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"상대-경로에-대한-경로-재작성\">상대 경로에 대한 경로 재작성</h2>\n<p>TypeScript 코드를 <code class=\"language-text\">ts-node</code>, <code class=\"language-text\">tsx</code>, <code class=\"language-text\">Deno</code>, <code class=\"language-text\">Bun</code> 과 같은 도구에서 직접 실행할 있다. 최근에 Node.js 에서도 <code class=\"language-text\">--experimental-strip-types</code> 및 <code class=\"language-text\">--experimental-transform-types</code>을 통해 이 기능을 지원한다. 이런 기능은 빌드 작업을 다시 실행할 필요 없이 빠르게 반복 작업을 수행할 수 있어 편리하다.</p>\n<p>하지만 이런 기능을 사용하려면 TypeScript 파일은 런타임 시 적절한 <code class=\"language-text\">.ts</code> 확장자로 가져와야 한다. 예를 들어 <code class=\"language-text\">foo.ts</code>라는 파일을 가져오려면 Node.js의 실험적인 지원에서 아래와 같이 작성해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// main.ts</span>\r\n\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> foo <span class=\"token keyword\">from</span> <span class=\"token string\">\"./foo.ts\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;- we need foo.ts here, not foo.js</span></code></pre></div>\n<p>TypeScript는 이런 방식을 사용하면 출력 파일을 가져오는 것으로 예상해 오류를 발생시킨다. 하지만 일부 도구는 <code class=\"language-text\">.ts</code> 가져오기는 허용해 TS는 이미 <code class=\"language-text\">--allowImportingTsExtensions</code>라는 옵션을 통해 이 가져오기 방식을 지원하고 있다.</p>\n<p>그러나 <code class=\"language-text\">.ts</code> 파일에서 실제로 <code class=\"language-text\">.js</code> 파일을 생성해야하는 경우에는 어떻게 해야 할까? 이러한 시나리오는 지원하기 위해 새로운 컴파일러 옵션인 <code class=\"language-text\">--rewriteRelativeImportExtensions</code>가 추가되었다. 이 옵션은 다음 조건을 만족할 때 가져오기 경로를 해당 JS 확장자로 재작성한다.</p>\n<ul>\n<li>가져오기 경로가 상대 경로(<code class=\"language-text\">./</code> 또는 <code class=\"language-text\">../</code>로 시작)일 때</li>\n<li>TypeScript 확장자(<code class=\"language-text\">.ts</code>, <code class=\"language-text\">.tsx</code>, <code class=\"language-text\">.mts</code>, <code class=\"language-text\">.cts</code>)로 끝날 때</li>\n<li>선언 파일이 아닐 때</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// Under --rewriteRelativeImportExtensions...</span>\r\n\r\n<span class=\"token comment\">// these will be rewritten.</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> foo <span class=\"token keyword\">from</span> <span class=\"token string\">\"./foo.ts\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> bar <span class=\"token keyword\">from</span> <span class=\"token string\">\"../someFolder/bar.mts\"</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// these will NOT be rewritten in any way.</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> a <span class=\"token keyword\">from</span> <span class=\"token string\">\"./foo\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> b <span class=\"token keyword\">from</span> <span class=\"token string\">\"some-package/file.ts\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> c <span class=\"token keyword\">from</span> <span class=\"token string\">\"@some-scope/some-package/file.ts\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> d <span class=\"token keyword\">from</span> <span class=\"token string\">\"#/file.ts\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> e <span class=\"token keyword\">from</span> <span class=\"token string\">\"./file.js\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>컴파일러는 경로를 JS 확장자(<code class=\"language-text\">.js</code>, <code class=\"language-text\">.jsx</code>, <code class=\"language-text\">.mjs</code>, <code class=\"language-text\">.cjs</code>)로 재작성한다.</p>\n<p>TypeScript가 경로 재작성을 피했던 이유를 말하면 \"동적 가져오기\" 때문이다. 아래와 같은 코드에서 가져오기 경로를 처리하는 것은 간단하지 않다. 사실, 종속성 내에서 <code class=\"language-text\">import</code> 동작을 재정의하는 것은 불가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">getPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"./foo.ts\"</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"./foo.js\"</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">let</span> myImport <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token function\">getPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>또 다른 문제는, 위에서 본 것처럼 상대 경로만 재작성되며, 이는 단순하게만 작성되어 TypeScript의 <code class=\"language-text\">baseUrl</code>과 <code class=\"language-text\">paths</code>를 사용하는 경로는 재작성되지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.json</span>\r\n\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nodenext\"</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token comment\">// ...</span>\r\n        <span class=\"token property\">\"paths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token property\">\"@/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"./src/*\"</span><span class=\"token punctuation\">]</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// Won't be transformed, won't work.</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> utilities <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/utilities.ts\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">package.json</code>의 내보내기 및 가져오기 필드를 통해 resolve 될 수 있는 경로도 마찬가지이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// package.json</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-package\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"imports\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">\"#root/*\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./dist/*\"</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// Won't be transformed, won't work.</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> utilities <span class=\"token keyword\">from</span> <span class=\"token string\">\"#root/utilities.ts\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>따라서 워크스페이스 스타일의 레이아웃을 사용해 여러 패키지가 서로를 참조하는 경우, 이를 처리하려면 조건부 내보내기와 사용자 지정 범위 조건을 사용해야할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// my-package/package.json</span>\r\n\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-package\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"exports\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">\".\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token property\">\"@my-package/development\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src/index.ts\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"import\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./lib/index.js\"</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token property\">\"./*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token property\">\"@my-package/development\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src/*.ts\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token property\">\"import\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./lib/*.js\"</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">.ts</code> 파일을 가져오고 싶을 때 다음과 같이 실행할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> <span class=\"token parameter variable\">--conditions</span><span class=\"token operator\">=</span>@my-package/development</code></pre></div>\n<p>위에서 사용된 조건인 <code class=\"language-text\">@my-package/development</code>의 \"네임스페이스\" 또는 \"범위\"에 주목해라. 이는 동일한 <code class=\"language-text\">development</code> 조건을 사용하는 종속성과 충돌을 피하기 위한 임시 방편이다. 만약 모든 패키지가 <code class=\"language-text\">development</code>를 내보내면 경로 해석이 <code class=\"language-text\">.ts</code> 파일로 시도될 수 있고 올바르게 동작하지 않을 수 있다.</p>\n<h2 id=\"--target-es2024-및---lib-es2024-지원\"><code class=\"language-text\">--target es2024</code> 및 <code class=\"language-text\">--lib es2024</code> 지원</h2>\n<p>TypeScript 5.7에선 ECMAScript 2024 런타임을 대상으로 <code class=\"language-text\">--target es2024</code> 옵션을 지원한다. 이를 통해 <code class=\"language-text\">SharedArrayBuffer</code>와 <code class=\"language-text\">ArrayBuffer</code>의 새로운 기능, <code class=\"language-text\">Object.groupBy</code>, <code class=\"language-text\">Map.groupBy</code>, <code class=\"language-text\">Promise.withResolvers</code> 등을 포함하는 <code class=\"language-text\">--lib es2024를</code> 지정할 수 있다. 또한, <code class=\"language-text\">Atomics.waitAsync</code>가 <code class=\"language-text\">--lib es2022</code>에서 <code class=\"language-text\">--lib es2024</code>로 이동되었다.</p>\n<p><code class=\"language-text\">SharedArrayBuffer</code>와 <code class=\"language-text\">ArrayBuffer</code>의 변경사항으로 인해, 두 객체는 이제 약간의 차이가 있다. 이 격차를 해소하고 기본 버퍼 타입을 유지하기 위해, 모든 <code class=\"language-text\">TypedArray</code>(예: <code class=\"language-text\">Uint8Array</code> 등)는 이제 제네릭으로 정의된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Uint8Array<span class=\"token operator\">&lt;</span>TArrayBuffer <span class=\"token keyword\">extends</span> ArrayBufferLike <span class=\"token operator\">=</span> ArrayBufferLike<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// ...</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>각 <code class=\"language-text\">TypedArray</code>는 이제 <code class=\"language-text\">TArrayBuffer</code>라는 타입 매개변수를 가지며, 이 매개변수는 기본 타입 인수를 갖는다. 따라서 <code class=\"language-text\">Int32Array</code>를 참조할 때 <code class=\"language-text\">Int32Array&lt;ArrayBufferLike></code>와 같이 명시적으로 작성하지 않아도 된다.</p>\n<p>이 업데이트로 인해 문제가 발생한다면, <code class=\"language-text\">@types/node</code>를 업데이트해야 할 수 있다.</p>\n<h2 id=\"프로젝트-소유권을-위한-상위-구성-파일-검색\">프로젝트 소유권을 위한 상위 구성 파일 검색</h2>\n<p>TS 파일이 <code class=\"language-text\">TSServer</code>를 사용하는 편집기에서 로드되면 편집기는 <code class=\"language-text\">tsconfig.json</code>을 찾으려고 편집 중인 파일의 디렉터리에서 상위 디렉터리로 이동하며 이 파일을 검색한다.</p>\n<p>이전에는 검색이 첫 번째 <code class=\"language-text\">tsconfig.json</code> 파일을 찾는 즉시 중단되었다. 하지만 아래와 같은 프로젝트 구조를 상상해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">project/\r\n├── src/\r\n│   ├── foo.ts\r\n│   ├── foo-test.ts\r\n│   ├── tsconfig.json\r\n│   └── tsconfig.test.json\r\n└── tsconfig.json</code></pre></div>\n<p>여기서 핵심 아이디어는 <code class=\"language-text\">src/tsconfig.json</code>이 프로젝트의 주요 구성 파일이며, <code class=\"language-text\">src/tsconfig.test.json</code>은 테스트 실행을 위한 구성 파일이라는 점이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// src/tsconfig.json</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../dist\"</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"**/*.test.ts\"</span><span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// src/tsconfig.test.json</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../dist/test\"</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"**/*.test.ts\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"references\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token punctuation\">{</span> <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./tsconfig.json\"</span> <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// tsconfig.json</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// This is a \"workspace-style\" or \"solution-style\" tsconfig.</span>\r\n    <span class=\"token comment\">// Instead of specifying any files, it just references all the actual projects.</span>\r\n    <span class=\"token property\">\"files\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"references\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token punctuation\">{</span> <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src/tsconfig.json\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span> <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src/tsconfig.test.json\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>문제는 <code class=\"language-text\">foo-test.ts</code> 파일을 편집할 때 편집기가 <code class=\"language-text\">project/src/tsconfig.json</code>을 해당 파일의 \"소유\" 구성 파일로 간주한다는 점이다. 이는 우리가 원하는 파일이 아닐 수 있고 디렉터리 검색이 멈춘다면 원하는 겨로가를 얻지 못할 수 있다.</p>\n<p>이 문제를 피하기 위해 이전에는 <code class=\"language-text\">src/tsconfig.json</code>의 이름을 <code class=\"language-text\">src/tsconfig.src.json</code>과 같이 변경해야 했다. 이렇게 하면 모든 파일이 최상위 <code class=\"language-text\">tsconfig.json</code> 파일에 도달 해 이 파일은 모든 프로젝트를 참조하도록 설정된다. 하지만 이 방식은 비효율적일 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">project/\r\n├── src/\r\n│   ├── foo.ts\r\n│   ├── foo-test.ts\r\n│   ├── tsconfig.src.json\r\n│   └── tsconfig.test.json\r\n└── tsconfig.json</code></pre></div>\n<p>이제 TypeScript 5.7은 개발자에게 이러한 작업을 강요하는 대신, 디렉터리 트리를 계속 탐색하여 편집기에서 사용할 적절한 <code class=\"language-text\">tsconfig.json</code> 파일을 찾는다.</p>\n<h2 id=\"복합-프로젝트에서-더-빠른-프로젝트-소유권-확인\">복합 프로젝트에서 더 빠른 프로젝트 소유권 확인</h2>\n<p>다음과 같은 구조를 가진 대규모 코드베이스를 상상해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">packages\r\n├── graphics/\r\n│   ├── tsconfig.json\r\n│   └── src/\r\n│       └── ...\r\n├── sound/\r\n│   ├── tsconfig.json\r\n│   └── src/\r\n│       └── ...\r\n├── networking/\r\n│   ├── tsconfig.json\r\n│   └── src/\r\n│       └── ...\r\n├── input/\r\n│   ├── tsconfig.json\r\n│   └── src/\r\n│       └── ...\r\n└── app/\r\n    ├── tsconfig.json\r\n    ├── some-script.js\r\n    └── src/\r\n        └── ...</code></pre></div>\n<p><code class=\"language-text\">packages</code>의 각 디렉터리는 별도의 TypeScript 프로젝트이며, 앱 디렉터리는 다른 모든 프로젝트에 종속되는 메인 프로젝트이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// app/tsconfig.json</span>\r\n<span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// ...</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token property\">\"references\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token punctuation\">{</span> <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../graphics/tsconfig.json\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span> <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../sound/tsconfig.json\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span> <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../networking/tsconfig.json\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span> <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../input/tsconfig.json\"</span> <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">app</code> 디렉터리에 <code class=\"language-text\">some-script.js</code> 파일이 있다고 가정하고 편집기에서 열면 TypeScript는 이 팡리이 어느 프로젝트에 속하는지 파악하여 적절한 설정을 적용하려 한다.</p>\n<p>이 경우, 가장 가까운 <code class=\"language-text\">tsconfig.json</code>파일(<code class=\"language-text\">app/tsconfig.json</code>)이 이 파일을 포함하지 않는다면 과거에는 TypeScript가 이를 확인하기 위해 각 프로젝트를 하나씩 로드해 <code class=\"language-text\">some-script.js</code>를 포함하는 프로젝트를 찾는 즉시 중단했다. 이 접근은 대규모 코드베이스에서 심각하고 예측하기 어려운 성능 문제를 유발했다.</p>\n<p>다른 프로젝트가 참조할 수 있는 모든 프로젝트는 <code class=\"language-text\">composite</code> 플래그를 활성화해야 한다. 이 플래그는 모든 입력 소스 파일이 미리 알려져 있어야 한다는 규칙을 강제한다. 따라서 TypeScript 5.7은 복합 프로젝트를 탐색할 때, 파일이 해당 프로젝트의 루트 파일 집합에 속하는지만 확인한다. 이를 통해 일반적으로 발생하던 최악의 성능 문제를 방지할 수 있다.</p>\n<h2 id=\"--module-nodenext에서-json-가져오기에-대한-검증\"><code class=\"language-text\">--module nodenext</code>에서 JSON 가져오기에 대한 검증</h2>\n<p><code class=\"language-text\">--module nodenext</code> 옵션을 사용해 <code class=\"language-text\">.json</code> 파일을 가져올 때, TypeScript는 런타임 오류를 방지하기 위해 특정 규칙을 강제한다.</p>\n<p>첫 번째로 JSON 파일을 가져오는 경우 반드시 <code class=\"language-text\">type: \"json\"</code> 속성이 포함된 import attribute가 있어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> myConfig <span class=\"token keyword\">from</span> <span class=\"token string\">\"./myConfig.json\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">//                   ~~~~~~~~~~~~~~~~~</span>\r\n<span class=\"token comment\">// ❌ error: Importing a JSON file into an ECMAScript module requires a 'type: \"json\"' import attribute when 'module' is set to 'NodeNext'.</span>\r\n\r\n<span class=\"token keyword\">import</span> myConfig <span class=\"token keyword\">from</span> <span class=\"token string\">\"./myConfig.json\"</span> <span class=\"token keyword\">with</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"json\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token comment\">//                                          ^^^^^^^^^^^^^^^^</span>\r\n<span class=\"token comment\">// ✅ This is fine because we provided `type: \"json\"`</span>\r\n</code></pre></div>\n<p>이 규칙은 런타임에 발생할 수 있는 잠재적인 문제를 미리 방지하기 위한 것으로, JSON 파일을 명확히 구분하고 안전하게 가져올 수 있도록 한다.</p>\n<p>이 검증 외에도 TypeScript는 <code class=\"language-text\">.json</code> 파일에 대해 \"named\" export를 생성하지 않는다. 따라서 JSON 파일의 내용은 오직 기본(default) 가져오기를 통해서만 접근할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// ✅ This is okay:</span>\r\n<span class=\"token keyword\">import</span> myConfigA <span class=\"token keyword\">from</span> <span class=\"token string\">\"./myConfig.json\"</span> <span class=\"token keyword\">with</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"json\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">let</span> version <span class=\"token operator\">=</span> myConfigA<span class=\"token punctuation\">.</span>version<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">///////////</span>\r\n\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> myConfigB <span class=\"token keyword\">from</span> <span class=\"token string\">\"./myConfig.json\"</span> <span class=\"token keyword\">with</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"json\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// ❌ This is not:</span>\r\n<span class=\"token keyword\">let</span> version <span class=\"token operator\">=</span> myConfig<span class=\"token punctuation\">.</span>version<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// ✅ This is okay:</span>\r\n<span class=\"token keyword\">let</span> version <span class=\"token operator\">=</span> myConfig<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">.</span>version<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"nodejs의-v8-컴파일-캐싱-지원\">Node.js의 V8 컴파일 캐싱 지원</h2>\n<p>Node.js 22는 새로운 API인 <code class=\"language-text\">module.enableCompileCache()</code>를 지원한다. 이 API는 도구의 첫 실행 이후에 수행된 일부 파싱 및 컴파일 작업을 재사용할 수 있도록 해준다.</p>\n<p>TypeScript 5.7은 이 API를 활용하여 더 빠르게 유용한 작업을 시작할 수 있다. TypeScript 팀의 자체 테스트에서는 <code class=\"language-text\">tsc --version</code> 명령 실행 속도가 약 2.5배 빨라지는 결과를 확인했다.</p>","frontmatter":{"date":"24.12.04","description":"TypeScript 5.7 Release를 번역하면서 어떤 기능들이 나왔는지 학습합니다.","heroImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVR42mOwD9z6n5qYga4GOgRBsGPwNggO2gbmk22gjd+W/9a+m/9b+Wz6bwWmN/+38d1CnoG2/lv+R2cd+B+fd/B/WsmR/ynFh/+nAumY7ANgOQdyDAxO3vs/p+rY//TSI/8T8g/9zyg/+j825wDY5bi8TtDLlkBvmntt+m/hDcEgr1MUy7BIgUUQRZEyKNIhABp8yGCqIO1VAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/6952768edde771e3e65071afc7efe37d/18b2e/heroImage.png","srcSet":"/static/6952768edde771e3e65071afc7efe37d/a4d46/heroImage.png 175w,\n/static/6952768edde771e3e65071afc7efe37d/d8f52/heroImage.png 350w,\n/static/6952768edde771e3e65071afc7efe37d/18b2e/heroImage.png 700w","sizes":"(min-width: 700px) 700px, 100vw"},"sources":[{"srcSet":"/static/6952768edde771e3e65071afc7efe37d/eac4f/heroImage.webp 175w,\n/static/6952768edde771e3e65071afc7efe37d/a4795/heroImage.webp 350w,\n/static/6952768edde771e3e65071afc7efe37d/377b6/heroImage.webp 700w","type":"image/webp","sizes":"(min-width: 700px) 700px, 100vw"}]},"width":700,"height":350}}},"heroImageAlt":"타입스크립트","tags":["Typescript","번역"],"title":"TypeScript 5.7 번역"},"tableOfContents":"<ul>\n<li><a href=\"#%EC%B4%88%EA%B8%B0%ED%99%94%EB%90%98%EC%A7%80-%EC%95%8A%EC%9D%80-%EB%B3%80%EC%88%98%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B2%80%EC%82%AC\">초기화되지 않은 변수에 대한 검사</a></li>\n<li><a href=\"#%EC%83%81%EB%8C%80-%EA%B2%BD%EB%A1%9C%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B2%BD%EB%A1%9C-%EC%9E%AC%EC%9E%91%EC%84%B1\">상대 경로에 대한 경로 재작성</a></li>\n<li><a href=\"#--target-es2024-%EB%B0%8F---lib-es2024-%EC%A7%80%EC%9B%90\"><code class=\"language-text\">--target es2024</code> 및 <code class=\"language-text\">--lib es2024</code> 지원</a></li>\n<li><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%86%8C%EC%9C%A0%EA%B6%8C%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%83%81%EC%9C%84-%EA%B5%AC%EC%84%B1-%ED%8C%8C%EC%9D%BC-%EA%B2%80%EC%83%89\">프로젝트 소유권을 위한 상위 구성 파일 검색</a></li>\n<li><a href=\"#%EB%B3%B5%ED%95%A9-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90%EC%84%9C-%EB%8D%94-%EB%B9%A0%EB%A5%B8-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%86%8C%EC%9C%A0%EA%B6%8C-%ED%99%95%EC%9D%B8\">복합 프로젝트에서 더 빠른 프로젝트 소유권 확인</a></li>\n<li><a href=\"#--module-nodenext%EC%97%90%EC%84%9C-json-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B2%80%EC%A6%9D\"><code class=\"language-text\">--module nodenext</code>에서 JSON 가져오기에 대한 검증</a></li>\n<li><a href=\"#nodejs%EC%9D%98-v8-%EC%BB%B4%ED%8C%8C%EC%9D%BC-%EC%BA%90%EC%8B%B1-%EC%A7%80%EC%9B%90\">Node.js의 V8 컴파일 캐싱 지원</a></li>\n</ul>"}},"pageContext":{"id":"18bd060d-36e6-55a9-b135-a9e4df7f9031","frontmatter__slug":"/translate-ts-5-7","previous":null,"previousTitle":null,"next":"/translate-ts-5-6","nextTitle":"TypeScript 5.6 번역"}},"staticQueryHashes":["1485575810"],"slicesMap":{}}