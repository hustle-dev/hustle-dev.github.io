<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.12.8"/><meta name="description" content="TypeScript 5.2 Release를 번역하면서 어떤 기능들이 나왔는지 학습합니다." data-gatsby-head="true"/><meta name="image" content="https://hustle-dev.github.io/static/6952768edde771e3e65071afc7efe37d/18b2e/heroImage.png" data-gatsby-head="true"/><meta property="og:title" content="TypeScript 5.2 번역" data-gatsby-head="true"/><meta property="og:description" content="TypeScript 5.2 Release를 번역하면서 어떤 기능들이 나왔는지 학습합니다." data-gatsby-head="true"/><meta property="og:type" content="blog" data-gatsby-head="true"/><meta property="og:url" content="https://hustle-dev.github.io/posts/translate-ts-5-2/" data-gatsby-head="true"/><meta property="og:image" content="https://hustle-dev.github.io/static/6952768edde771e3e65071afc7efe37d/18b2e/heroImage.png" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="TypeScript 5.2 번역" data-gatsby-head="true"/><meta name="twitter:description" content="TypeScript 5.2 Release를 번역하면서 어떤 기능들이 나왔는지 학습합니다." data-gatsby-head="true"/><meta property="twitter:image" content="https://hustle-dev.github.io/static/6952768edde771e3e65071afc7efe37d/18b2e/heroImage.png" data-gatsby-head="true"/><style data-href="/styles.ec9de3a034abf2c00ed3.css" data-identity="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Fira+Code:wght@500&display=swap);*,:after,:before{box-sizing:border-box}*{margin:0}body,html{height:100%}body{-webkit-font-smoothing:antialiased;line-height:1.5}canvas,img,picture,svg,video{display:block;max-width:100%}button,input,select,textarea{font:inherit}h1,h2,h3,h4,h5,h6,p{overflow-wrap:break-word}#___gatsby{isolation:isolate}@font-face{font-display:block;font-family:Pretendard;font-style:normal;font-weight:700;src:url(/fonts/Pretendard-Bold.subset.woff2) format("woff2")}@font-face{font-display:block;font-family:Pretendard;font-style:normal;font-weight:600;src:url(/fonts/Pretendard-SemiBold.subset.woff2) format("woff2")}@font-face{font-display:block;font-family:Pretendard;font-style:normal;font-weight:500;src:url(/fonts/Pretendard-Medium.subset.woff2) format("woff2")}@font-face{font-display:block;font-family:Pretendard;font-style:normal;font-weight:400;src:url(/fonts/Pretendard-Regular.subset.woff2) format("woff2")}@font-face{font-display:block;font-family:Tenada;font-style:normal;font-weight:400;src:url(/fonts/Tenada.woff2) format("woff2")}:root{--primary-c1:#15af73;--primary-c2:#f7f2ef;--background:#fff;--tag-background:#fff;--article-background:#fff;--black:#151414;--gray-1:#f6f6f6;--gray-2:#c5c5c5;--gray-3:#9e9e9e;--gray-4:#747474;--gray-5:#2f2f2f;--gray-6:#232323;--icon-color:#000}[dark-mode]{--background:#2f2f2f;--tag-background:transparent;--article-background:#232323;--black:#151414;--gray-1:#fff;--gray-2:#c5c5c5;--gray-3:#aaa;--gray-4:#c5c5c5;--gray-5:#fff;--icon-color:#fff}::selection{background-color:rgba(21,175,115,.2)}body{background-color:var(--background);font-family:Pretendard,-apple-system,BlinkMacSystemFont,system-ui,Roboto,Helvetica Neue,Segoe UI,Apple SD Gothic Neo,Noto Sans KR,Malgun Gothic,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,sans-serif;transition:.1s}hr{background-color:var(--gray-2);border:0;display:block;height:.5px;margin-bottom:30px;margin-top:30px;width:100%}code[class*=language-],pre[class*=language-]{background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;tab-size:4}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.entity{cursor:help}.token.inserted{color:green}code[class*=language-],pre[class*=language-]{word-wrap:normal;border-radius:11px;color:#d6deeb;font-family:Fira Code,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:.875rem;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:rgba(29,59,83,.99);text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{background:#011627;color:#fff;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{background-color:var(--tag-background);border:1px solid var(--primary-c1);border-radius:.2em;color:var(--primary-c1);margin:0 .2em;padding:.1em .4em;white-space:normal}:not(pre)>code[class*=language-]::selection{background-color:rgba(21,175,115,.2)}h1 code[class*=language-],h2 code[class*=language-],h3 code[class*=language-],h4 code[class*=language-]{all:unset;font-family:Tenada}.token.cdata,.token.comment,.token.prolog{color:#637777;font-style:italic}.token.punctuation{color:#c792ea}.namespace{color:#b2ccd6}.token.deleted{color:rgba(239,83,80,.56);font-style:italic}.token.property,.token.symbol{color:#80cbc4}.token.keyword,.token.operator,.token.tag{color:#7fdbca}.token.boolean{color:#ff5874}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.doctype,.token.selector{color:#c792ea;font-style:italic}.token.attr-name,.token.inserted{color:#addb67;font-style:italic}.language-css .token.string,.style .token.string,.token.entity,.token.string,.token.url{color:#addb67}.token.atrule,.token.attr-value,.token.class-name{color:#ffcb8b}.token.important,.token.regex,.token.variable{color:#d6deeb}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.typography-module--D1--c5dd7{font-family:Tenada;font-size:2.1875rem;font-style:normal;font-weight:800}.typography-module--D2--adef4{font-size:1.6875rem;font-style:normal;font-weight:700;line-height:2.125rem}.typography-module--D3--32bdc{font-size:1.625rem;font-style:normal;font-weight:700;line-height:2.125rem}.typography-module--H1--8d71f{font-size:1.375rem;font-style:normal;font-weight:700;line-height:2rem}.typography-module--H2--9aa93{font-size:1.25rem;font-style:normal;font-weight:700;line-height:1.875rem}.typography-module--T1--21b4a{font-size:1.1875rem;font-style:normal;font-weight:700;line-height:1.75rem}.typography-module--T2--f0605{font-size:1.125rem;font-style:normal;font-weight:600;line-height:1.75rem}.typography-module--T3--5f413{font-size:1.125rem;font-style:normal;font-weight:500;line-height:1.75rem}.typography-module--B1--e72d9{font-size:1.0625rem;font-style:normal;font-weight:400;line-height:1.5625rem}.typography-module--B2--e1ec1{font-size:.9375rem;font-style:normal;font-weight:700;line-height:1.4375rem}.typography-module--B3--64106{font-size:.9375rem;font-style:normal;font-weight:600;line-height:1.4375rem}.typography-module--B4--714ca{font-size:.9375rem;font-style:normal;font-weight:500;line-height:1.4375rem}.typography-module--B5--b68ef{font-size:.875rem;font-style:normal;font-weight:600;line-height:1.25rem}.typography-module--B6--b4e62{font-size:.8125rem;font-style:normal;font-weight:500;line-height:1.25rem}.typography-module--B7--0ed9d{font-size:.8125rem;font-style:normal;font-weight:600;line-height:1.25rem}.Footer-module--footer--8e28d{margin:0 auto;max-width:1400px;min-width:260px;padding:50px 20px 20px;text-align:center}.Footer-module--copyRight--32cfc{color:var(--gray-3);font-size:1rem}.Footer-module--designedBy--c183b{color:var(--gray-2);display:block;font-size:.5rem;text-align:right;transition:.1s}@media screen and (min-width:31.25rem){.Footer-module--footer--8e28d{padding:50px 60px 20px}}.Header-module--header--c6522{min-width:300px}.Header-module--wrapper--ba41c{display:flex;justify-content:space-between;padding:20px}.Header-module--fixed--97e94{backdrop-filter:blur(5.5px);-webkit-backdrop-filter:blur(5.5px);background-color:hsla(0,0%,100%,.2);position:sticky;top:0;width:100%;z-index:1}.Header-module--progressBar--134e3{background-color:var(--primary-c1);height:2px;width:var(--progress-width)}.Header-module--headingLink--1bb02{text-decoration:none}.Header-module--headingWrapper--db6dc{align-items:center;display:flex;gap:8px}.Header-module--heading--f2604{color:var(--primary-c1);display:inline-block;font-family:Tenada;font-size:.8125rem;font-weight:800;line-height:1.125rem;margin-top:2px}.Header-module--headerButtons--2fba8{align-items:center;display:flex;gap:14px}.Header-module--iconButton--0e487{all:unset;cursor:pointer}.Header-module--iconButton--0e487:focus{border-radius:2px;outline:2px solid -webkit-focus-ring-color;outline-offset:1px}.Header-module--iconButton--0e487:focus:not(:focus-visible){outline:none}.Header-module--icon--f2202 path{fill:var(--icon-color);stroke:var(--icon-color)}@media screen and (min-width:31.25rem){.Header-module--wrapper--ba41c{padding:20px 60px}.Header-module--headerButtons--2fba8{gap:28px}}.NotFound-module--page--c1de4{color:#232129;font-family:-apple-system,Roboto,sans-serif,serif;padding:96px}.NotFound-module--heading--1a30c{margin-bottom:64px;margin-top:0;max-width:320px}.NotFound-module--paragraph--1c84a{margin-bottom:48px}.NotFound-module--code--782d2{background-color:#fff4db;border-radius:4px;color:#8a6534;font-size:1.25rem;padding:4px}.FloatingButton-module--floatingButton--e14d6{align-items:center;background-color:var(--primary-c1);border:0;border-radius:50%;bottom:50px;box-shadow:0 0 4px rgba(0,0,0,.25);cursor:pointer;display:flex;height:48px;justify-content:center;opacity:0;pointer-events:none;position:fixed;right:50px;transform:translateY(20px);transition:opacity .2s,transform .2s;width:48px;z-index:10}.FloatingButton-module--floatingButton--e14d6:hover{background-color:#15bc7c}.FloatingButton-module--floatingButton--e14d6.FloatingButton-module--visible--b1a10{opacity:1;pointer-events:auto;transform:translateY(0)}@media screen and (min-width:62.5rem){.FloatingButton-module--floatingButton--e14d6{height:64px;width:64px}}.Description-module--description--25e5f{color:var(--gray-3);margin-top:20px}.Heading-module--name--70a89{color:var(--primary-c1)}.IconWrapper-module--profileIcon--2b3ea{align-items:center;border-radius:30%;display:flex;height:30px;justify-content:center;transition:.1s;width:30px}.IconWrapper-module--profileIcon--2b3ea:hover{background-color:rgba(21,175,115,.1)}.ProfileCard-module--wrapper--66efd{display:flex;flex-direction:column;gap:20px;min-width:260px}@media screen and (min-width:410px){.ProfileCard-module--wrapper--66efd{flex-direction:row}}.ProfileCard-module--postProfileImage--5c59c{display:block;flex-shrink:0;height:100px;margin:0 10px 0 0;width:100px}.ProfileCard-module--postProfileImage--5c59c img{border-radius:50%}.ProfileCard-module--postDescription--cb677{height:46px;margin-top:0}.ProfileCard-module--iconWrapper--48ab7{display:flex;margin-top:16px}.ProfileCard-module--card--da57d{min-width:260px}@media screen and (min-width:62.5rem){.ProfileCard-module--card--da57d{max-width:260px}}.ProfileCard-module--info--cf56c{align-items:baseline;display:flex;gap:5px;margin-top:25px}.ProfileCard-module--profileImage--e831a img{border-radius:50%}.Tag-module--tag--85a9e{background-color:var(--tag-background);border:1px solid var(--primary-c1);border-radius:30px;color:var(--primary-c1);padding:0 12px 2px}.Date-module--date--d4fbd{color:var(--gray-4)}.Description-module--description--9ea1f{-webkit-box-orient:vertical;word-wrap:break-word;-webkit-line-clamp:2;color:var(--gray-3);display:-webkit-box;overflow:hidden;text-overflow:ellipsis}.TagList-module--tagList--d5cc6{display:flex;gap:5px;padding:0}.Title-module--title--3663c{color:var(--gray-5)}.Post-module--articleLink--d1094{text-decoration:none}.Post-module--articleLink--d1094 .Post-module--cardDate--b072f,.Post-module--articleLink--d1094 .Post-module--cardDescription--9c3c1,.Post-module--articleLink--d1094 .Post-module--cardTitle--31c4d,.Post-module--articleLink--d1094 .Post-module--itemDate--dd369,.Post-module--articleLink--d1094 .Post-module--itemDescription--8c7de,.Post-module--articleLink--d1094 .Post-module--itemTitle--5b5c6{text-decoration:underline;text-decoration-color:transparent;transition:.1s}.Post-module--articleLink--d1094:focus .Post-module--cardDate--b072f,.Post-module--articleLink--d1094:focus .Post-module--cardDescription--9c3c1,.Post-module--articleLink--d1094:focus .Post-module--cardTitle--31c4d,.Post-module--articleLink--d1094:focus .Post-module--itemDate--dd369,.Post-module--articleLink--d1094:focus .Post-module--itemDescription--8c7de,.Post-module--articleLink--d1094:focus .Post-module--itemTitle--5b5c6,.Post-module--articleLink--d1094:hover .Post-module--cardDate--b072f,.Post-module--articleLink--d1094:hover .Post-module--cardDescription--9c3c1,.Post-module--articleLink--d1094:hover .Post-module--cardTitle--31c4d,.Post-module--articleLink--d1094:hover .Post-module--itemDate--dd369,.Post-module--articleLink--d1094:hover .Post-module--itemDescription--8c7de,.Post-module--articleLink--d1094:hover .Post-module--itemTitle--5b5c6{text-decoration-color:var(--gray-5)}.Post-module--card--c936a{background-color:var(--article-background);border-radius:24px;box-shadow:0 3px 15px rgba(0,0,0,.1);flex:1 1 420px;height:420px;max-width:420px;min-width:325px;overflow:hidden}.Post-module--cardImage--37335{height:208px}.Post-module--cardImage--37335 img{border-top-left-radius:24px;border-top-right-radius:24px}.Post-module--cardCaption--b686f{padding:0 20px 28px;position:relative}.Post-module--cardDate--b072f{display:inline-block;position:absolute;right:20px;top:4px}.Post-module--cardTagList--d2f12{margin-top:23px;width:80%}.Post-module--cardTitle--31c4d{margin-left:4px;margin-top:20px}.Post-module--cardDescription--9c3c1{height:2.5rem;margin-left:4px;margin-top:20px;width:90%}.Post-module--item--25f91{background-color:var(--article-background);border-radius:23px;box-shadow:0 0 10px rgba(0,0,0,.1);flex:1 1;min-height:165px;min-width:300px;padding:20px;position:relative}.Post-module--itemFigure--894b5{display:flex;justify-content:space-between;width:100%}.Post-module--itemImage--0bdef{display:none!important;height:120px;min-width:190px;width:190px}.Post-module--itemImage--0bdef img{border-radius:15px}@media screen and (min-width:48.75rem){.Post-module--itemImage--0bdef{display:block!important}}.Post-module--itemCaption--04590{flex:1 1;flex-shrink:100000;order:-1;width:100%}.Post-module--itemTitle--5b5c6{word-wrap:break-word;margin-left:4px;margin-top:7px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:80%}.Post-module--itemDescription--8c7de{height:2.5rem;margin-left:4px;margin-top:1px;width:80%}.Post-module--itemDate--dd369{bottom:20px;margin-left:4px;position:absolute}.PostList-module--postList--f7183{display:flex;flex-direction:column;gap:20px;padding:0}.RecentPost-module--heading--e35dd,.RecentPost-module--recentPostList--d076e{display:none}@media screen and (min-width:48.75rem){.RecentPost-module--heading--e35dd{color:var(--gray-5);display:block}.RecentPost-module--recentPostList--d076e{display:flex;gap:24px;list-style:none;margin-top:25px;padding:0}}.TagButtonWithCount-module--tagButton--64c99{background-color:transparent;border:1px solid var(--gray-2);border-radius:30px;color:var(--gray-2);cursor:pointer;padding:3px 12.5px 4px;transition:.1s}.TagButtonWithCount-module--active--41c40,.TagButtonWithCount-module--tagButton--64c99:hover{border-color:var(--primary-c1);color:var(--primary-c1)}.TagList-module--tagList--bf40d{display:flex;flex-wrap:wrap;gap:6px;list-style:none;padding:0}.TagList-module--tagItem--6c929{margin-top:15px}.Home-module--main--c9d7f{display:flex;flex-direction:column;margin-left:auto;margin-right:auto;margin-top:50px;max-width:1400px;padding:0 20px}.Home-module--wrapper--b5449{flex:1 1}.Home-module--divider--1e899{display:none}.Home-module--tagList--14f89{margin-top:20px}.Home-module--postList--2b55e{margin-top:35px}@media screen and (min-width:31.25rem){.Home-module--aside--85fdc,.Home-module--wrapper--b5449{padding:0 40px}}@media screen and (min-width:48.75rem){.Home-module--shrinkSpace--62acc{height:30px}.Home-module--divider--1e899{display:block;margin-bottom:20px;margin-top:45px}}@media screen and (min-width:62.5rem){.Home-module--main--c9d7f{flex-direction:row;padding:0 60px}.Home-module--aside--85fdc{margin-top:150px;padding:0}.Home-module--shrinkSpace--62acc{display:block;flex:1 1;max-width:150px;min-width:20px}.Home-module--wrapper--b5449{padding:0}}.TableOfContents-module--wrapper--bbb7b{border-left:2px solid var(--gray-2);display:none;margin-right:-80px;max-height:calc(100vh - 180px);max-width:320px;overflow-y:auto;padding:0 10px;position:sticky;top:90px}@media screen and (min-width:81.25rem){.TableOfContents-module--wrapper--bbb7b{display:block}}.TableOfContents-module--pen--0130b{margin-bottom:6px}.TableOfContents-module--tableOfContents--86e5d>ul{margin-left:auto;width:240px}.TableOfContents-module--tableOfContents--86e5d ul{list-style:none;padding:0}.TableOfContents-module--tableOfContents--86e5d ul ul{padding-left:10px}.TableOfContents-module--tableOfContents--86e5d li{margin-bottom:3px}.TableOfContents-module--tableOfContents--86e5d a{color:var(--gray-3);text-decoration:none;transition:.1s}.TableOfContents-module--tableOfContents--86e5d a:hover{color:var(--primary-c1)}.TableOfContents-module--tableOfContents--86e5d a,.TableOfContents-module--tableOfContents--86e5d code,.TableOfContents-module--tableOfContents--86e5d p{font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit}.TableOfContents-module--tableOfContents--86e5d code[class*=language-]{all:unset}.TableOfContents-module--tableOfContents--86e5d a.TableOfContents-module--active--9e400{color:var(--primary-c1);display:inline-block}.TagList-module--tagList--5d45f{display:flex;gap:5px;padding:0}.TagList-module--tag--97cb0{padding:3px 12.5px 6px}.Post-module--wrapper--0d882{margin:30px auto 0;max-width:800px;min-width:300px;padding:0 20px}.Post-module--title--b3d9d{color:var(--gray-5);font-size:1.875rem}.Post-module--date--d2ebe{color:var(--gray-4);font-size:1rem;margin-top:18px}.Post-module--tagList--67ec3{margin-top:25px}.Post-module--heroImage--434f0{margin-top:20px;max-height:400px;min-width:300px;width:100%}.Post-module--heroImage--434f0 img{border-radius:11px}.Post-module--contentWrapper--849fc{align-items:flex-start;display:flex;justify-content:space-between;min-width:300px;width:auto}@media screen and (min-width:1300px){.Post-module--contentWrapper--849fc{width:auto;width:940px}}.Post-module--mainText--c7254{--blockquote-bgColor:var(--article-background);--blockquote-color:var(--icon-color);color:var(--gray-5);display:flex;flex:1 1;flex-direction:column;font-size:1.125rem;margin-top:30px;max-width:680px;min-width:300px;word-break:break-all}.Post-module--mainText--c7254 a{color:var(--primary-c1);text-decoration:underline;text-decoration-color:transparent;transition:.1s}.Post-module--mainText--c7254 a:hover{text-decoration-color:var(--primary-c1)}.Post-module--mainText--c7254 blockquote{align-items:center;background-color:var(--blockquote-bgColor);border-radius:11px;box-shadow:0 0 7px rgba(0,0,0,.15);color:var(--blockquote-color);display:flex;gap:6px;margin-bottom:1rem;margin-top:1rem;padding:20px 18px 20px 15px}.Post-module--mainText--c7254 blockquote:before{content:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='21' height='21' fill='none' viewBox='0 0 21 21'%3E%3Cpath fill='%2315AF73' d='M8.087 16.622h10.288v1.75H2.625v-3.713l8.662-8.662L15 9.71l-6.912 6.912ZM12.525 4.76l1.856-1.856a.875.875 0 0 1 1.237 0l2.475 2.475a.875.875 0 0 1 0 1.237l-1.856 1.856-3.712-3.712Z'/%3E%3C/svg%3E");height:21px;margin:10px;width:21px}.Post-module--mainText--c7254 :not(pre)>code[class*=language-]{padding:0 .4em}.Post-module--mainText--c7254 blockquote p{font-size:1rem;font-style:normal;font-weight:600;line-height:1.6;margin:0;word-break:break-all}.Post-module--mainText--c7254 p{display:block;line-height:1.6;margin-block-end:.4em;margin-block-start:.4em;margin-inline-end:0;margin-inline-start:0}.Post-module--mainText--c7254 h1{margin-top:1.8em}.Post-module--mainText--c7254 h2{margin-top:1.5em}.Post-module--mainText--c7254 h3{margin-bottom:.5em;margin-top:1em}.Post-module--mainText--c7254 h1,.Post-module--mainText--c7254 h2,.Post-module--mainText--c7254 h3{scroll-margin-top:73px}.Post-module--mainText--c7254 img{display:block;margin:0 auto}.Post-module--mainText--c7254 ol,.Post-module--mainText--c7254 ul{margin-bottom:.3em;margin-top:.3em}.Post-module--mainText--c7254 ol>li,.Post-module--mainText--c7254 ul>li{line-height:1.6}.Post-module--mainText--c7254 table{border:1px solid var(--primary-c1);border-collapse:collapse;font-size:.875rem;margin-bottom:.5em;margin-top:.5em;max-width:100%;min-width:40%}.Post-module--mainText--c7254 table tbody tr:nth-child(2n){background-color:rgba(21,175,115,.1)}.Post-module--mainText--c7254 table td,.Post-module--mainText--c7254 table th{border:1px solid var(--primary-c1);padding:.5em;word-break:break-all}.Post-module--mainText--c7254 tr>th{border-bottom:3px solid var(--primary-c1)}.Post-module--divider--c81f5{margin-top:60px}.Post-module--bio--f3d06{margin-bottom:50px;margin-top:60px}@media screen and (min-width:31.25rem){.Post-module--wrapper--0d882{margin-top:60px;padding:0 60px}}@media screen and (min-width:48.75rem){.Post-module--wrapper--0d882{margin-top:90px}}</style><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LDKTNNPSGB"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LDKTNNPSGB', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=cf7a82b31395b147138599e756ed8027" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="alternate" type="application/rss+xml" title="Hustle-dev Blog RSS Feed" href="/rss.xml"/><title data-gatsby-head="true">TypeScript 5.2 번역</title><link rel="canonical" href="https://hustle-dev.github.io/posts/translate-ts-5-2/" data-gatsby-head="true"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main class="Post-module--wrapper--0d882"><h1 class="typography-module--D2--adef4 Post-module--title--b3d9d">TypeScript 5.2 번역</h1><p class="typography-module--B7--0ed9d Post-module--date--d2ebe">23.08.29</p><ul class="TagList-module--tagList--5d45f Post-module--tagList--67ec3"><div class="Tag-module--tag--85a9e TagList-module--tag--97cb0"><span class="typography-module--B7--0ed9d">Typescript</span></div><div class="Tag-module--tag--85a9e TagList-module--tag--97cb0"><span class="typography-module--B7--0ed9d">번역</span></div></ul><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained Post-module--heroImage--434f0"><div style="max-width:700px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;350&#x27;%20width=&#x27;700&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;object-fit:contain" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVR42mOwD9z6n5qYga4GOgRBsGPwNggO2gbmk22gjd+W/9a+m/9b+Wz6bwWmN/+38d1CnoG2/lv+R2cd+B+fd/B/WsmR/ynFh/+nAumY7ANgOQdyDAxO3vs/p+rY//TSI/8T8g/9zyg/+j825wDY5bi8TtDLlkBvmntt+m/hDcEgr1MUy7BIgUUQRZEyKNIhABp8yGCqIO1VAAAAAElFTkSuQmCC" alt=""/><picture><source type="image/webp" data-srcset="/static/6952768edde771e3e65071afc7efe37d/eac4f/heroImage.webp 175w,/static/6952768edde771e3e65071afc7efe37d/a4795/heroImage.webp 350w,/static/6952768edde771e3e65071afc7efe37d/377b6/heroImage.webp 700w" sizes="(min-width: 700px) 700px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:contain;opacity:0" sizes="(min-width: 700px) 700px, 100vw" decoding="async" loading="lazy" data-src="/static/6952768edde771e3e65071afc7efe37d/18b2e/heroImage.png" data-srcset="/static/6952768edde771e3e65071afc7efe37d/a4d46/heroImage.png 175w,/static/6952768edde771e3e65071afc7efe37d/d8f52/heroImage.png 350w,/static/6952768edde771e3e65071afc7efe37d/18b2e/heroImage.png 700w" alt="타입스크립트"/></picture><noscript><picture><source type="image/webp" srcSet="/static/6952768edde771e3e65071afc7efe37d/eac4f/heroImage.webp 175w,/static/6952768edde771e3e65071afc7efe37d/a4795/heroImage.webp 350w,/static/6952768edde771e3e65071afc7efe37d/377b6/heroImage.webp 700w" sizes="(min-width: 700px) 700px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:contain;opacity:0" sizes="(min-width: 700px) 700px, 100vw" decoding="async" loading="lazy" src="/static/6952768edde771e3e65071afc7efe37d/18b2e/heroImage.png" srcSet="/static/6952768edde771e3e65071afc7efe37d/a4d46/heroImage.png 175w,/static/6952768edde771e3e65071afc7efe37d/d8f52/heroImage.png 350w,/static/6952768edde771e3e65071afc7efe37d/18b2e/heroImage.png 700w" alt="타입스크립트"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><div class="Post-module--contentWrapper--849fc"><section class="Post-module--mainText--c7254"><!-- 썸네일 -->
<!-- 본문 -->
<blockquote>
<p>원글 링크: <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-2/">https://devblogs.microsoft.com/typescript/announcing-typescript-5-2/</a></p>
</blockquote>
<h2 id="using-선언-및-명시적-리소스-관리-사용"><code class="language-text">using</code> 선언 및 명시적 리소스 관리 사용</h2>
<p>TS 5.2에는 곧 출시될 ECMAScript의 명시적 리소스 관리 기능이 추가된다. 이 기능이 나오게 된 원인과 사용이점을 이해해보자.</p>
<p>객체를 생성한 후 일종의 '정리(클린업)'를 해야 하는 경우가 있다. 예를 들어 네트워크 연결을 닫거나 임시 파일을 삭제하거나 메모리를 확보해야 하는 것이다.</p>
<p>임시 파일을 생성하고 읽고 쓴 파일을 닫은 뒤, 삭제하는 함수를 상상해보자.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> fs <span class="token keyword">from</span> <span class="token string">"fs"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doSomeWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">".some_temp_file"</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">openSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// use file...</span>

    <span class="token comment">// Close the file and delete it.</span>
    fs<span class="token punctuation">.</span><span class="token function">closeSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>조기 종료가 필요한 경우는 어떻게 될까?</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doSomeWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">".some_temp_file"</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">openSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// use file...</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do some more work...</span>

        <span class="token comment">// Close the file and delete it.</span>
        fs<span class="token punctuation">.</span><span class="token function">closeSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Close the file and delete it.</span>
    fs<span class="token punctuation">.</span><span class="token function">closeSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>잊어버리기 쉬운 clean-up(클린업)이 일부 중복되기 시작했다. 또한 오류가 발생하면 파일을 닫고 삭제한다는 보장도 없다. 이 모든 것을 <code class="language-text">try/finally</code> 블록으로 감싸면 이 문제를 해결할 수 있다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doSomeWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">".some_temp_file"</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">openSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// use file...</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// do some more work...</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token comment">// Close the file and delete it.</span>
        fs<span class="token punctuation">.</span><span class="token function">closeSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이 방법은 더 강력하지만 코드에 상당한 '노이즈'가 추가된다. <code class="language-text">finally</code> 블록에 더 많은 clean-up(클린업) 로직을 추가하기 시작하면 다른 리소스를 처리하지 못하게 하는 예외와 같은 다른 발목을 잡는 문제도 발생할 수 있다. <a href="https://github.com/tc39/proposal-explicit-resource-management">명시적 리소스 관리</a> 제안이 해결하고자 하는 것이 바로 이 문제이다. 제안의 핵심 아이디어는 처리하려고 하는 clean-up(클린업)을 자바스크립트에서 first class 아이디어로 지원하는 것이다.</p>
<p>이 작업은 <code class="language-text">Symbol.dispose</code>라는 새로운 내장 <code class="language-text">symbol</code>을 추가하는 것으로 시작되며, <code class="language-text">Symbol.dispose</code> 메서드를 가진 객체를 생성할 수 있다. 편의를 위해 TypeScript는 이를 설명하는 <code class="language-text">Disposable</code>이라는 새로운 전역 타입을 정의한다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">TempFile</span> <span class="token keyword">implements</span> <span class="token class-name">Disposable</span> <span class="token punctuation">{</span>
    #path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    #handle<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#path <span class="token operator">=</span> path<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#handle <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">openSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// other methods</span>

    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>dispose<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Close the file and delete it.</span>
        fs<span class="token punctuation">.</span><span class="token function">closeSync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>나중에 해당 메서드(<code class="language-text">[Symbol.dispose]</code>)를 호출할 수 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doSomeWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TempFile</span><span class="token punctuation">(</span><span class="token string">".some_temp_file"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        file<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>dispose<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>clean-up 로직을 <code class="language-text">TempFile</code> 자체로 옮긴다고 해서 크게 얻을 수 있는 것은 없다. 기본적으로 <code class="language-text">finally</code> 블록의 모든 clean-up을 메서드로 옮긴 것일 뿐이며, 이는 항상 가능했다. 하지만 이 메서드에 잘 알려진 '이름'이 있다는 것은 자바스크립트가 그 위에 다른 기능을 구축할 수 있다는 것을 의미한다.</p>
<p>이 기능의 첫 번째 주인공은 바로 <code class="language-text">using</code> 선언이다! <code class="language-text">using</code> 선언은 <code class="language-text">const</code>처럼 새로운 고정 바인딩을 선언할 수 있는 새로운 키워드다. 가장 큰 차이점은 <code class="language-text">using</code>으로 선언된 변수는 스코프가 끝날 때 <code class="language-text">Symbol.dispose</code> 메서드가 호출된다는 점이다!</p>
<p>따라서 코드를 다음과 같이 간단하게 작성할 수 있다</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doSomeWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    using file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TempFile</span><span class="token punctuation">(</span><span class="token string">".some_temp_file"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// use file...</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do some more work...</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>전과 비교해보면 <code class="language-text">try/finally</code> 블록이 없다. 기능적으로는 <code class="language-text">using</code> 선언을 사용하면 바로 이 작업을 수행할 수 있지만, 굳이 그렇게 할 필요는 없다.</p>
<p>C#에서 <code class="language-text">using</code> 선언을 사용하거나 Python에서 <code class="language-text">with</code> 문을 사용하거나 Java에서 <code class="language-text">try</code>-with-resource 선언을 사용하는 데 익숙할 수 있다. 이들은 모두 JavaScript의 새로운 <code class="language-text">using</code> 키워드와 유사하며, 스코프 끝에서 객체의 "분해"를 수행하는 유사한 명시적 방법을 제공한다.</p>
<p><code class="language-text">using</code> 선언을 사용하면 containing scope의 맨 끝 또는 <code class="language-text">return</code>이나 <code class="language-text">throw Error</code>와 같은 "조기 반환" 직전에 이러한 clean-up을 수행한다. 또한 스택처럼 선입선출 순서로 처리한다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">loggy</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Disposable <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Creating </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>dispose<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Disposing </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    using a <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    using b <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{</span>
        using c <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        using d <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    using e <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>

    <span class="token comment">// Unreachable.</span>
    <span class="token comment">// Never created, never disposed.</span>
    using f <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"f"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Creating a</span>
<span class="token comment">// Creating b</span>
<span class="token comment">// Creating c</span>
<span class="token comment">// Creating d</span>
<span class="token comment">// Disposing d</span>
<span class="token comment">// Disposing c</span>
<span class="token comment">// Creating e</span>
<span class="token comment">// Disposing e</span>
<span class="token comment">// Disposing b</span>
<span class="token comment">// Disposing a</span></code></pre></div>
<p><code class="language-text">using</code> 선언을 사용하는 함수는 예외에 탄력적이어야 하며, 에러가 발생하면 처분 후 다시 던져진다. 반면에 함수 본문은 예상대로 실행될 수 있지만 <code class="language-text">Symbol.dispose</code>가 <code class="language-text">throw</code>될 수 있다. 이 경우 해당 예외도 다시 발생한다.</p>
<p>하지만 처분 전후의 로직이 모두 오류를 발생시키면 어떻게 될까? 이러한 경우를 위해 <code class="language-text">SuppressedError</code>가 <code class="language-text">Error</code>의 새로운 하위 타입으로 도입되었다. 마지막으로 던져진 에러를 보관하는 <code class="language-text">suppressed</code> 프로퍼티와 가장 최근에 던져진 에러에 대한 <code class="language-text">error</code> 프로퍼티가 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">ErrorA</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">"ErrorA"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ErrorB</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">"ErrorB"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">throwy</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>dispose<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ErrorA</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error from </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    using a <span class="token operator">=</span> <span class="token function">throwy</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ErrorB</span><span class="token punctuation">(</span><span class="token string">"oops!"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SuppressedError</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// An error was suppressed during disposal.</span>

    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>error<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ErrorA</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error from a</span>

    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>suppressed<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ErrorB</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>suppressed<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// oops!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>예제에서 동기 메서드를 사용하고 있다는 것을 눈치챘을 것이다. 하지만 많은 리소스 처리는 비동기 작업과 관련이 있으며, 다른 코드를 계속 실행하기 전에 해당 작업이 완료될 때까지 기다려야 한다.</p>
<p>그렇기 때문에 새로운 <code class="language-text">Symbol.asyncDispose</code>가 있으며, <code class="language-text">await using</code> 선언을 사용하여 대기하는 다음 단계로 넘어간다. <code class="language-text">using</code> 선언을 사용하는 것과 비슷하지만, 핵심은 누구의 처분을 <code class="language-text">await</code> 하는지 조회한다는 것이다. 이 메서드들은 <code class="language-text">Symbol.asyncDispose</code>라는 다른 메서드를 사용하지만, <code class="language-text">Symbol.dispose</code>가 있는 모든 것에 대해 작동할 수 있다. 편의를 위해 TypeScript는 비동기 처분 메서드가 있는 모든 객체를 설명하는 <code class="language-text">AsyncDisposable</code>이라는 전역 타입도 도입했다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do fake work for half a second.</span>
    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">loggy</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> AsyncDisposable <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Constructing </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        async <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>asyncDispose<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Disposing (async) </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">await</span> <span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> using a <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> using b <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">await</span> using c <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> using d <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> using e <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>

    <span class="token comment">// Unreachable.</span>
    <span class="token comment">// Never created, never disposed.</span>
    <span class="token keyword">await</span> using f <span class="token operator">=</span> <span class="token function">loggy</span><span class="token punctuation">(</span><span class="token string">"f"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Constructing a</span>
<span class="token comment">// Constructing b</span>
<span class="token comment">// Constructing c</span>
<span class="token comment">// Constructing d</span>
<span class="token comment">// Disposing (async) d</span>
<span class="token comment">// Disposing (async) c</span>
<span class="token comment">// Constructing e</span>
<span class="token comment">// Disposing (async) e</span>
<span class="token comment">// Disposing (async) b</span>
<span class="token comment">// Disposing (async) a</span></code></pre></div>
<p>다른 사람이 일관되게 해체 로직을 수행할 것으로 예상되는 경우 <code class="language-text">Disposable</code> 및 <code class="language-text">AsyncDisposable</code>로 타입을 정의하면 코드를 훨씬 쉽게 작업할 수 있다. 실제로 <code class="language-text">dispose()</code> 또는 <code class="language-text">close()</code> 메서드가 있는 기존 타입이 많이 존재한다. 예를 들어 Visual Studio Code API는 자체 <code class="language-text">Disposable</code> 인터페이스를 정의하기도 한다. 브라우저와 Node.js, Deno, Bun과 같은 런타임의 API도 파일 핸들, 연결 등과 같이 이미 정리 메서드가 있는 객체에 대해 <code class="language-text">Symbol.dispose</code> 및 <code class="language-text">Symbol.asyncDispose</code>를 사용하도록 선택할 수 있다.</p>
<p>라이브러리에서는 이 모든 것이 훌륭하게 들릴지 모르지만 시나리오에서는 약간 무거울 수 있다. 임시 clean-up을 많이 하는 경우 새로운 타입을 만들면 지나치게 추상화되고 모범 사례에 대한 의문이 생길 수 있다. 예를 들어 <code class="language-text">TempFile</code>의 예를 다시 살펴보자.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">TempFile</span> <span class="token keyword">implements</span> <span class="token class-name">Disposable</span> <span class="token punctuation">{</span>
    #path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    #handle<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#path <span class="token operator">=</span> path<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#handle <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">openSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// other methods</span>

    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>dispose<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Close the file and delete it.</span>
        fs<span class="token punctuation">.</span><span class="token function">closeSync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doSomeWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    using file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TempFile</span><span class="token punctuation">(</span><span class="token string">".some_temp_file"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// use file...</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do some more work...</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>두 개의 함수를 호출하는 것만 기억하면 되지만, 이것이 최선의 작성 방법일까? 생성자에서 <code class="language-text">openSync</code>를 호출해야 할까, 아니면 <code class="language-text">open()</code> 메서드를 만들어야 할까, 아니면 핸들을 직접 전달해야 할까? 수행해야 하는 모든 가능한 연산에 대해 메서드를 노출해야 할까, 아니면 프로퍼티만 공개해야 할까?</p>
<p>이제 이 기능의 마지막 스타를 소개한다. <code class="language-text">DisposableStack</code>과 <code class="language-text">AsyncDisposableStack</code>이다. 이 객체들은 일회성 및 많은 clean-up을 수행하는 데 유용하다. <code class="language-text">DisposableStack</code>은 <code class="language-text">Disposable</code> 객체를 추적하는 여러 메서드가 있는 객체로, 임의의 정리 작업을 수행하기 위한 함수를 지정할 수 있다. 또한 <code class="language-text">using</code> 변수를 사용해 할당할 수도 있는데, 이것도 <code class="language-text">Disposable</code>이기 때문이다! 원래 예제를 이렇게 작성할 수 있을 것이다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">doSomeWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">".some_temp_file"</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">openSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    using cleanup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DisposableStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cleanup<span class="token punctuation">.</span><span class="token function">defer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">closeSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// use file...</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do some more work...</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>여기서 <code class="language-text">defer()</code> 메서드는 콜백을 받기만 하며, 이 콜백은 <code class="language-text">cleanup</code>이 처리되면 실행된다. 일반적으로 <code class="language-text">defer</code>(<code class="language-text">use</code> 및 <code class="language-text">adopt</code>와 같은 <code class="language-text">DisposableStack</code> 메서드)는 리소스를 생성한 직후에 호출해야 한다. 이름에서 알 수 있듯이 <code class="language-text">DisposableStack</code>은 스택처럼 추적하는 모든 것을 선입선출 순서로 폐기하므로 값을 생성한 직후에 defer를 호출하면 이상한 종속성 문제를 피할 수 있다. <code class="language-text">AsyncDisposableStack</code>은 비슷하게 작동하지만 <code class="language-text">async</code> 함수와 <code class="language-text">AsyncDisposable</code>s을 추적할 수 있으며, 그 자체로 <code class="language-text">AsyncDisposable</code>이다.</p>
<p><code class="language-text">defer</code> 메서드는 Go, Swift, Zig, Odin 등의 <code class="language-text">defer</code> 키워드와 여러 가지 면에서 유사하며, 규칙도 비슷해야한다.</p>
<p>이 기능은 최신 기능이기 때문에 대부분의 런타임에서 기본적으로 지원하지 않는다. 이 기능을 사용하려면 다음에 대한 런타임 폴리필이 필요하다.</p>
<ul>
<li><code class="language-text">Symbol.dispose</code></li>
<li><code class="language-text">Symbol.asyncDispose</code></li>
<li><code class="language-text">DisposableStack</code></li>
<li><code class="language-text">AsyncDisposableStack</code></li>
<li><code class="language-text">SuppressedError</code></li>
</ul>
<p>그러나 <code class="language-text">using</code>과 <code class="language-text">await using</code>에만 관심이 있다면 내장된 <code class="language-text">symbol</code>을 폴리필링하는 것만으로도 충분할 것이다. 대부분의 경우 다음과 같은 간단한 방법으로 해결할 수 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts">Symbol<span class="token punctuation">.</span>dispose <span class="token operator">??=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"Symbol.dispose"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Symbol<span class="token punctuation">.</span>asyncDispose <span class="token operator">??=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"Symbol.asyncDispose"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>또한 컴파일 <code class="language-text">target</code>을 <code class="language-text">es2022</code> 이하로 설정하고 <code class="language-text">lib</code> 설정에 <code class="language-text">"esnext"</code> 또는 <code class="language-text">"esnext.disposable"</code>을 포함하도록 구성해야한다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token punctuation">{</span>
    <span class="token string-property property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">"target"</span><span class="token operator">:</span> <span class="token string">"es2022"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"es2022"</span><span class="token punctuation">,</span> <span class="token string">"esnext.disposable"</span><span class="token punctuation">,</span> <span class="token string">"dom"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="decorator-metadata">Decorator Metadata</h2>
<p>타입스크립트 5.2는 데코레이터 메타데이터라는 곧 출시될 ECMAScript 기능을 구현한다.</p>
<p>이 기능의 핵심 아이디어는 데코레이터가 사용하는 클래스 또는 그 안에서 메타데이터를 쉽게 생성하고 사용할 수 있도록 하는 것이다.</p>
<p>이제 데코레이터 함수를 사용할 때마다 컨텍스트 객체의 새 <code class="language-text">metadata</code> 프로퍼티에 액세스할 수 있다. <code class="language-text">metadata</code> 프로퍼티는 단순한 객체만 보유한다. 자바스크립트에서는 프로퍼티를 임의로 추가할 수 있으므로 각 데코레이터가 업데이트하는 사전으로 사용할 수 있다. 또는 클래스의 각 데코레이션 부분에 대해 모든 <code class="language-text">metadata</code> 객체가 동일하므로 이를 <code class="language-text">Map</code>의 키로 사용할 수 있다. 클래스에 있는 모든 데코레이터가 실행되면 해당 오브젝트는 <code class="language-text">Symbol.metadata</code>를 통해 클래스에서 액세스할 수 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    metadata<span class="token operator">:</span> Record<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setMetadata</span><span class="token punctuation">(</span>_target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> context<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>metadata<span class="token punctuation">[</span>context<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">SomeClass</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">setMetadata</span></span>
    foo <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">setMetadata</span></span>
    accessor bar <span class="token operator">=</span> <span class="token string">"hello!"</span><span class="token punctuation">;</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">setMetadata</span></span>
    <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> ourMetadata <span class="token operator">=</span> SomeClass<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>metadata<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>ourMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { "bar": true, "baz": true, "foo": true }</span></code></pre></div>
<p>이는 여러 가지 시나리오에서 유용할 수 있다. 디버깅, 직렬화, 데코레이터를 사용한 의존성 주입 등 다양한 용도로 메타데이터를 첨부할 수 있다. 메타데이터 객체는 데코레이터가 적용된 클래스별로 생성되므로 프레임워크는 메타데이터 객체를 <code class="language-text">Map</code> 또는 <code class="language-text">WeakMap</code>의 키로 비공개로 사용하거나 필요에 따라 프로퍼티를 붙일 수 있다.</p>
<p>예를 들어, <code class="language-text">JSON.stringify</code>를 다음과 같이 사용할 때 어떤 프로퍼티와 접근자가 직렬화 가능한지 추적하기 위해 데코레이터를 사용한다고 가정해 보자.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> serialize<span class="token punctuation">,</span> jsonify <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./serializer"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    lastName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">serialize</span></span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">serialize</span></span>
    <span class="token keyword">get</span> <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">jsonify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>firstName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>여기서 의도는 <code class="language-text">age</code>와 <code class="language-text">fullName</code>만 직렬화해야 한다는 것인데, 이는 <code class="language-text">@serialize</code> 데코레이터로 표시되어 있기 때문이다. 이를 위해 <code class="language-text">toJSON</code> 메서드를 정의하지만, <code class="language-text">@serialize</code>가 생성한 메타데이터를 사용하는 <code class="language-text">jsonify</code>를 호출할 뿐이다.</p>
<p>다음은 <code class="language-text">./serialize.ts</code> 모듈이 어떻게 정의되는지에 대한 예시이다:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> serializables <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Context</span> <span class="token operator">=</span>
    <span class="token operator">|</span> ClassAccessorDecoratorContext
    <span class="token operator">|</span> ClassGetterDecoratorContext
    <span class="token operator">|</span> ClassFieldDecoratorContext
    <span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">serialize</span><span class="token punctuation">(</span>_target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> context<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>static <span class="token operator">||</span> context<span class="token punctuation">.</span>private<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Can only serialize public instance members."</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">"symbol"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Cannot serialize symbol-named properties."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> propNames <span class="token operator">=</span>
        <span class="token punctuation">(</span>context<span class="token punctuation">.</span>metadata<span class="token punctuation">[</span>serializables<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">??=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    propNames<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">jsonify</span><span class="token punctuation">(</span>instance<span class="token operator">:</span> object<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> metadata <span class="token operator">=</span> instance<span class="token punctuation">.</span>constructor<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>metadata<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> propNames <span class="token operator">=</span> metadata<span class="token operator">?.</span><span class="token punctuation">[</span>serializables<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>propNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"No members marked with @serialize."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> pairStrings <span class="token operator">=</span> propNames<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>key <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> strKey <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> strValue <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span>instance <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>strKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>strValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pairStrings<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> }</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이 모듈에는 <code class="language-text">@serializable</code>로 표시된 프로퍼티의 이름을 저장하고 검색하기 위해 <code class="language-text">serializables</code>라는 로컬 <code class="language-text">symbol</code>이 있다. 이 모듈은 <code class="language-text">@serializable</code>을 호출할 때마다 메타데이터에 이러한 프로퍼티 이름 목록을 저장한다. <code class="language-text">jsonify</code>가 호출되면 메타데이터에서 속성 목록을 가져와 인스턴스에서 실제 값을 검색하는 데 사용되며, 결국 해당 이름과 값을 직렬화한다.</p>
<p><code class="language-text">symbol</code>을 사용하면 기술적으로 다른 사람이 이 데이터에 액세스할 수 있다. 메타데이터 객체를 키로 사용하는 <code class="language-text">WeakMap</code>을 사용하는 것도 대안이 될 수 있다. 이 경우 데이터를 비공개로 유지하고 타입 단언을 더 적게 사용하지만 그 외에는 비슷하다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> serializables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Context</span> <span class="token operator">=</span>
    <span class="token operator">|</span> ClassAccessorDecoratorContext
    <span class="token operator">|</span> ClassGetterDecoratorContext
    <span class="token operator">|</span> ClassFieldDecoratorContext
    <span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">serialize</span><span class="token punctuation">(</span>_target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> context<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>static <span class="token operator">||</span> context<span class="token punctuation">.</span>private<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Can only serialize public instance members."</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Can only serialize string properties."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> propNames <span class="token operator">=</span> serializables<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>metadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>propNames <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        serializables<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>metadata<span class="token punctuation">,</span> propNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    propNames<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">jsonify</span><span class="token punctuation">(</span>instance<span class="token operator">:</span> object<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> metadata <span class="token operator">=</span> instance<span class="token punctuation">.</span>constructor<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>metadata<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> propNames <span class="token operator">=</span> metadata <span class="token operator">&amp;&amp;</span> serializables<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>propNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"No members marked with @serialize."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> pairStrings <span class="token operator">=</span> propNames<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>key <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> strKey <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> strValue <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span>instance <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>strKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>strValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pairStrings<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> }</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>참고로, 이러한 구현은 서브클래싱과 상속을 처리하지 않는다. 이는 자신의 몫이다.(그리고 어떤 버전의 파일이 다른 버전보다 더 쉽다는 것을 알게 될 수도 있다!).</p>
<p>이 기능은 아직 새 기능이기 때문에 대부분의 런타임은 기본적으로 지원하지 않는다. 이 기능을 사용하려면 Symbol.metadata에 대한 폴리필이 필요하다. 대부분의 경우 다음과 같은 간단한 방법으로 해결할 수 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts">Symbol<span class="token punctuation">.</span>metadata <span class="token operator">??=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"Symbol.metadata"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>또한 컴파일 대상을 <code class="language-text">es2022</code> 이하로 설정하고 라이브러리 설정에 <code class="language-text">"esnext"</code> 또는 <code class="language-text">"esnext.decorators"</code>를 포함하도록 구성해야 한다.</p>
<h2 id="명명된-요소-및-익명-튜플-요소">명명된 요소 및 익명 튜플 요소</h2>
<p>튜플 타입은 각 요소에 대해 선택적 레이블 또는 이름을 지원한다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name">Pair</span> <span class="token operator">=</span> <span class="token punctuation">[</span>first<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> second<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<p>이러한 레이블은 가독성과 툴링에 도움을 주기 위한 것일 뿐, 레이블로 허용되는 작업을 변경하는 것은 아니다.</p>
<p>하지만 이전에는 튜플에 레이블이 있는 요소와 레이블이 없는 요소를 섞어서 사용할 수 없다는 규칙이 있었다. 즉, 어떤 요소도 튜플에 레이블을 가질 수 없거나 모든 요소에 레이블이 필요했다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// ✅ fine - no labels</span>
<span class="token keyword">type</span> <span class="token class-name">Pair1</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// ✅ fine - all fully labeled</span>
<span class="token keyword">type</span> <span class="token class-name">Pair2</span> <span class="token operator">=</span> <span class="token punctuation">[</span>first<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> second<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// ❌ previously an error</span>
<span class="token keyword">type</span> <span class="token class-name">Pair3</span> <span class="token operator">=</span> <span class="token punctuation">[</span>first<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//                         ~</span>
<span class="token comment">// Tuple members must all have names</span>
<span class="token comment">// or all not have names.</span></code></pre></div>
<p><code class="language-text">rest</code> 또는 <code class="language-text">tail</code>과 같은 레이블을 추가해야하는 나머지 요소들의 경우 이는 성가신 일이 될 수 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// ❌ previously an error</span>
<span class="token keyword">type</span> <span class="token class-name">TwoOrMore_A</span> <span class="token operator">=</span> <span class="token punctuation">[</span>first<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> second<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//                                          ~~~~~~</span>
<span class="token comment">// Tuple members must all have names</span>
<span class="token comment">// or all not have names.</span>

<span class="token comment">// ✅</span>
<span class="token keyword">type</span> <span class="token class-name">TwoOrMore_B</span> <span class="token operator">=</span> <span class="token punctuation">[</span>first<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> second<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> rest<span class="token operator">:</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<p>또한 이 제한은 타입 시스템 내부에서 적용되어야 했기 때문에 TypeScript가 레이블을 잃게 된다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name">HasLabels</span> <span class="token operator">=</span> <span class="token punctuation">[</span>a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">HasNoLabels</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Merged</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>HasNoLabels<span class="token punctuation">,</span> <span class="token operator">...</span>HasLabels<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//   ^ [number, number, string, string]</span>
<span class="token comment">//</span>
<span class="token comment">//     'a' and 'b' were lost in 'Merged'</span></code></pre></div>
<p>TypeScript 5.2에서는 튜플 레이블에 대한 제한이 해제되었다. 이제 레이블이 없는 튜플로 스프레드할 때 레이블을 보존할 수도 있다.</p>
<h2 id="배열의-유니온에-더-쉬운-메서드-사용">배열의 유니온에 더 쉬운 메서드 사용</h2>
<p>이전 버전의 TypeScript에서는 배열의 유니온에서 메서드를 호출하는 것이 어려웠다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">let</span> array<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x <span class="token operator">=></span> <span class="token operator">!</span><span class="token operator">!</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//    ~~~~~~ error!</span>
<span class="token comment">// This expression is not callable.</span>
<span class="token comment">//   Each member of the union type '...' has signatures,</span>
<span class="token comment">//   but none of those signatures are compatible</span>
<span class="token comment">//   with each other.</span></code></pre></div>
<p>이 예제에서 TypeScript는 <code class="language-text">string[]</code> 및 <code class="language-text">number[]</code>에서 각 버전의 <code class="language-text">filter</code>가 호환되는지 확인하려고 시도한다. 일관된 전략이 없으면 TypeScript는 허공에 손을 던지고 "작동하게 만들 수 없습니다"라고 말한다.</p>
<p>TypeScript 5.2에서는 이러한 경우 포기하기 전에 배열의 공용체를 특수한 경우로 취급한다. 각 멤버의 요소 타입으로 새로운 배열 타입을 구성한 다음 그 배열에 메서드를 호출한다.</p>
<p>예를 들어 위의 <code class="language-text">string[] | number[]</code>는 <code class="language-text">(문자열 | 숫자)[]</code>(또는 <code class="language-text">Array&lt;string | number></code>)로 변환되고 해당 타입에 대해 <code class="language-text">filter</code>가 호출된다. 필터가 <code class="language-text">string[] | number[]</code> 대신 <code class="language-text">Array&lt;string | number></code>를 생성한다는 약간의 주의 사항이 있지만, 새로 생성된 값의 경우 "잘못된" 문제가 발생할 위험이 적다.</p>
<p>즉, <code class="language-text">filter</code>, <code class="language-text">find</code>, <code class="language-text">some</code>, <code class="language-text">every</code>, <code class="language-text">reduce</code>와 같은 많은 메서드가 이전에는 사용할 수 없었던 배열의 조합에 대해 모두 호출할 수 있어야 한다.</p>
<h2 id="배열-메서드-복사">배열 메서드 복사</h2>
<p>TypeScript 5.2에는 "복사하여 배열 변경" 제안에서 ECMAScript에 추가된 메서드에 대한 정의가 포함되어 있다.</p>
<p>자바스크립트의 배열에는 이미 <code class="language-text">sort()</code>, <code class="language-text">splice()</code>, <code class="language-text">reverse()</code> 등 몇 가지 유용한 메서드가 있었지만, 이 메서드들은 현재 배열을 업데이트했다. 종종 원본에 영향을 주지 않고 완전히 별도의 배열을 만드는 것이 바람직할 때가 있다. 이를 위해 <code class="language-text">slice()</code> 또는 배열 스프레드(예: <code class="language-text">[...myArray]</code>)를 사용하여 먼저 복사본을 가져온 다음 연산을 수행할 수 있다. 예를 들어, <code class="language-text">myArray.slice().reverse()</code>를 작성하여 반전된 복사본을 얻을 수 있다.</p>
<p>복사본을 만들되 단일 요소를 변경하는 또 다른 일반적인 경우도 있다. 이를 수행하는 방법에는 여러 가지가 있지만, 가장 확실한 방법은 아래와 같이 여러개의 문으로 된 긴 코드를 작성하는 것이다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> copy <span class="token operator">=</span> myArray<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
copy<span class="token punctuation">[</span>someIndex<span class="token punctuation">]</span> <span class="token operator">=</span> updatedValue<span class="token punctuation">;</span>
<span class="token function">doSomething</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>또는 아래와 같이 작성할 수 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token function">doSomething</span><span class="token punctuation">(</span>myArray<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=></span> index <span class="token operator">===</span> someIndex <span class="token operator">?</span> updatedValue <span class="token operator">:</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>이 모든 것이 너무 일반적인 연산의 경우 번거롭다. 그래서 자바스크립트에는 이제 동일한 연산을 수행하지만 원본 데이터에 영향을 주지 않는 새로운 메서드 4가지(<code class="language-text">toSorted</code>, <code class="language-text">toSpliced</code>, <code class="language-text">toReversed</code>, <code class="language-text">with</code>)가 추가되었다. 처음 3개의 메서드는 돌연변이 메서드와 동일한 연산을 수행하지만 새 배열을 반환한다. 또한 <code class="language-text">with</code> 메서드는 새 배열을 반환하지만 단일 요소가 업데이트된다(위에서 설명한 대로).</p>
<table>
<thead>
<tr>
<th align="center">Mutating</th>
<th align="center">Copying</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">myArray.reverse()</td>
<td align="center">myArray.toReversed()</td>
</tr>
<tr>
<td align="center">myArray.sort((a, b) => ...)</td>
<td align="center">myArray.toSorted((a, b) => ...)</td>
</tr>
<tr>
<td align="center">myArray.splice(start, deleteCount, ...items)</td>
<td align="center">myArray.toSpliced(start,</td>
</tr>
<tr>
<td align="center">myArray[index] = updatedValue</td>
<td align="center">myArray.with(index, updatedValue)</td>
</tr>
</tbody>
</table>
<p>복사 메서드는 항상 새 배열을 생성하는 반면, mutating 연산은 일관성이 없다는 점에 유의하자</p>
<p>이러한 메서드는 일반 배열에서만 사용할 수 있는 것이 아니라 <code class="language-text">Int32Array</code>, <code class="language-text">Uint8Array</code> 등과 같은 타입 배열에서도 사용할 수 있다.</p>
<h2 id="symbols-as-weakmap-and-weakset-keys"><code class="language-text">symbol</code>s as <code class="language-text">WeakMap</code> and <code class="language-text">WeakSet</code> Keys</h2>
<p><code class="language-text">symbol</code>을 <code class="language-text">WeakMap</code> 및 <code class="language-text">WeakSet</code>의 키로 사용할 수 있으며, 이는 ECMAScript 자체에 이 기능이 추가된 것을 반영한다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> myWeakMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> someObject <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Works! ✅</span>
myWeakMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> someObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
myWeakMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="typescript-구현-파일-확장자를-가진-타입-전용-가져오기-경로">TypeScript 구현 파일 확장자를 가진 타입 전용 가져오기 경로</h2>
<p>TypeScript는 이제 <code class="language-text">allowImportingTsExtensions</code>의 활성화 여부에 관계없이 선언 및 구현 파일 확장명을 모두 타입 전용 가져오기 경로에 포함할 수 있다.</p>
<p>즉, 이제 <code class="language-text">.ts</code>, <code class="language-text">.mts</code>, <code class="language-text">.cts</code> 및 <code class="language-text">.tsx</code> 파일 확장명을 사용하는 <code class="language-text">import type</code> 문을 작성할 수 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> JustAType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./justTypes.ts"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>param<span class="token operator">:</span> JustAType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>또한 JSDoc을 사용하여 TypeScript와 JavaScript 모두에서 사용할 수 있는 <code class="language-text">import()</code> 타입이 해당 파일 확장자를 사용할 수 있음을 의미한다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">/**
 * @param {import("./justTypes.ts").JustAType} param
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="객체-멤버의-쉼표-완성">객체 멤버의 쉼표 완성</h2>
<p>객체에 새 속성을 추가할 때 쉼표를 추가하는 것을 잊어버리기 쉽다. 이전에는 쉼표를 잊어버리고 자동 완성을 요청하면 TypeScript에서 관련 없는 잘못된 완성 결과가 표시되어 혼란스러웠다.</p>
<p>이제 TypeScript 5.2에서는 쉼표가 누락된 경우 객체 멤버 완성을 정상적으로 제공한다. 하지만 구문 오류로 표시되는 것을 건너뛰기 위해 누락된 쉼표도 자동으로 삽입한다.</p>
<img width="751" alt="image" src="https://github.com/hustle-dev/hustle-dev.github.io/assets/53992007/d3766590-082b-4929-9d28-e0873c256139">
<h2 id="인라인-변수-리팩토링">인라인 변수 리팩토링</h2>
<p>이제 TypeScript 5.2에는 변수의 내용을 모든 사용 사이트에 인라인 처리하는 리팩터링 기능이 있다.</p>
<img width="748" alt="image" src="https://github.com/hustle-dev/hustle-dev.github.io/assets/53992007/a0e959a0-94f1-405b-8fe2-acb890a2614e">
<p>"인라인 변수" 리팩터링을 사용하면 변수가 제거되고 변수의 모든 사용처가 해당 이니셜라이저로 대체된다. 이 경우 이니셜라이저의 부작용이 변수가 사용된 횟수만큼 다른 시간에 실행될 수 있다는 점에 유의하자.</p>
<h2 id="클릭-가능한-인레이-매개변수-힌트">클릭 가능한 인레이 매개변수 힌트</h2>
<p>인레이 힌트는 매개변수 이름, 추론된 유형 등 코드 내에 존재하지 않는 정보도 한눈에 파악할 수 있게 해준다. TypeScript 5.2에서는 인레이 힌트와 상호 작용할 수 있는 기능이 추가되었다. 예를 들어 Visual Studio 코드 인사이더에서는 이제 인레이 힌트를 클릭하여 매개변수의 정의로 이동할 수 있다.</p>
<img width="748" alt="image" src="https://github.com/hustle-dev/hustle-dev.github.io/assets/53992007/e3b705a8-4949-49f6-98a9-d3fee09dce33">
<h2 id="지속적인-타입-호환성-확인-최적화">지속적인 타입 호환성 확인 최적화</h2>
<p>TypeScript는 구조적 타입 시스템이기 때문에 멤버별로 타입을 비교해야 하는 경우가 있지만 재귀 타입은 여기에 몇 가지 문제가 있다. 예를 들어</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">;</span>
    other<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token constant">B</span><span class="token punctuation">;</span>
    other<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>타입 A가 타입 B와 호환되는지 확인할 때 타입스크립트는 결국 A와 B의 값 타입이 각각 호환되는지 확인하게 된다. 이 시점에서 타입 시스템은 더 이상 확인을 중단하고 다른 멤버를 확인해야 한다. 이를 위해 타입 시스템은 두 타입이 이미 관련되어 있는 경우를 추적해야 한다.</p>
<p>이전에는 타입스크립트가 이미 타입 쌍의 스택을 보관하고 이를 반복하여 해당 타입이 관련되어 있는지 확인했다. 이 스택이 얕을 때는 문제가 되지 않지만, 스택이 얕지 않을 때는 문제가 된다.</p>
<p>TypeScript 5.2에서는 간단한 <code class="language-text">Set</code>으로 이 정보를 추적할 수 있다. 이를 통해 드리즐 라이브러리를 사용한 보고된 테스트 케이스에 소요되는 시간이 33% 이상 단축되었다!</p>
<h2 id="변경-사항-및-오류-수정">변경 사항 및 오류 수정</h2>
<p>TypeScript는 불필요하게 변경하지 않기 위해 노력하지만, 때로는 코드를 더 잘 분석할 수 있도록 수정하고 개선해야 할 때가 있다.</p>
<h3 id="libdts-changes"><code class="language-text">lib.d.ts Changes</code></h3>
<p>DOM용으로 생성된 타입은 코드베이스에 영향을 미칠 수 있다. 자세한 내용은 TypeScript 5.2의 DOM 업데이트를 참조하세요.</p>
<h3 id="labeledelementdeclarations은-undefined-요소를-보유할-수-있음"><code class="language-text">labeledElementDeclarations</code>은 <code class="language-text">undefined</code> 요소를 보유할 수 있음</h3>
<p>레이블이 지정된 요소와 레이블이 지정되지 않은 요소의 혼합을 지원하기 위해 TypeScript의 API가 약간 변경되었다. <code class="language-text">TupleType</code>의 <code class="language-text">labeledElementDeclarations</code> 속성은 요소가 레이블이 지정되지 않은 각 위치에 대해 <code class="language-text">undefined</code> 상태로 유지될 수 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts">  <span class="token keyword">interface</span> <span class="token class-name">TupleType</span> <span class="token punctuation">{</span>
<span class="token operator">-</span>     labeledElementDeclarations<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token punctuation">(</span>NamedTupleMember <span class="token operator">|</span> ParameterDeclaration<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token operator">+</span>     labeledElementDeclarations<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token punctuation">(</span>NamedTupleMember <span class="token operator">|</span> ParameterDeclaration <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<h3 id="module과-moduleresolution는-최근-nodejs-설정에서-일치해야-한다"><code class="language-text">module</code>과 <code class="language-text">moduleResolution</code>는 최근 Node.js 설정에서 일치해야 한다.</h3>
<p><code class="language-text">module</code> 옵션과 <code class="language-text">moduleResolution</code> 옵션은 각각 <code class="language-text">node16</code>과 <code class="language-text">nodenext</code> 설정을 지원한다. 이는 사실상 모든 최신 Node.js 프로젝트에서 사용해야 하는 "최신 Node.js" 설정이다. 이 두 옵션이 Node.js 관련 설정을 사용하는지 여부에 대해 일치하지 않으면 프로젝트가 사실상 잘못 구성된다는 사실을 발견했다.</p>
<p>TypeScript 5.2에서는 <code class="language-text">--module</code> 및 <code class="language-text">--moduleResolution</code> 옵션 중 하나에 <code class="language-text">node16</code> 또는 <code class="language-text">nodenext</code>를 사용하는 경우 이제 다른 옵션에도 유사한 Node.js 관련 설정이 있어야 한다. 설정이 서로 다른 경우 다음과 같은 오류 메시지가 표시될 수 있다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts">Option <span class="token string">'moduleResolution'</span> must be <span class="token keyword">set</span> to <span class="token string">'NodeNext'</span> <span class="token punctuation">(</span>or left unspecified<span class="token punctuation">)</span> when option <span class="token string">'module'</span> <span class="token keyword">is</span> <span class="token keyword">set</span> to <span class="token string">'NodeNext'</span><span class="token punctuation">.</span>

<span class="token comment">// 또는</span>

Option <span class="token string">'module'</span> must be <span class="token keyword">set</span> to <span class="token string">'Node16'</span> when option <span class="token string">'moduleResolution'</span> <span class="token keyword">is</span> <span class="token keyword">set</span> to <span class="token string">'Node16'</span><span class="token punctuation">.</span></code></pre></div>
<p>예를 들어 <code class="language-text">--module esnext --muleResolution node16</code>은 거부되지만, <code class="language-text">--module nodenext</code>만 사용하거나 <code class="language-text">--module esnext --muleResolution</code> 번들러를 사용하는 것이 더 나을 수 있다.</p>
<h3 id="병합된-기호에-대한-일관된-export-확인">병합된 기호에 대한 일관된 export 확인</h3>
<p>두 선언이 병합되면 두 선언이 모두 내보낼지 여부가 일치해야 한다. 버그로 인해 선언 파일이나 <code class="language-text">declare module</code> 블록과 같은 주변 컨텍스트에서 TypeScript가 특정 경우를 놓쳤다. 예를 들어, 다음과 같이 <code class="language-text">replaceInFile</code>이 내보낸 함수로 한 번 선언되고 내보내지 않은 네임스페이스로 한 번 선언되는 경우에는 오류가 발생하지 않는다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'replace-in-file'</span> <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">replaceInFile</span><span class="token punctuation">(</span>config<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">namespace</span> replaceInFile <span class="token punctuation">{</span>
        <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sync</span><span class="token punctuation">(</span>config<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>주변 모듈에서 <code class="language-text">export { ... }</code> 또는 <code class="language-text">export default ...</code>와 같은 유사한 구문을 추가하면 모든 선언이 자동으로 내보내지는지 여부가 암시적으로 변경된다. 이제 TypeScript는 안타깝게도 이러한 혼란스러운 의미를 보다 일관되게 인식하고 <code class="language-text">replaceInFile</code>의 모든 선언이 수정자에서 일치해야 한다는 사실에 대해 다음과 같은 오류를 발생시킨다:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts">Individual declarations <span class="token keyword">in</span> merged declaration <span class="token string">'replaceInFile'</span> must be all exported or all local<span class="token punctuation">.</span></code></pre></div>
<h3 id="module-항상-namespace로-방출"><code class="language-text">module</code> 항상 <code class="language-text">namespace</code>로 방출</h3>
<p>타입스크립트의 <code class="language-text">namespace</code>는 사실 <code class="language-text">module</code> 키워드를 사용하기 시작했는데, ECMAScript도 같은 용도로 사용할 수 있을 것으로 보였기 때문dl다. 원래는 이를 "내부 모듈"이라고 불렀지만 내부 모듈은 결국 자바스크립트에 포함되지 않았다.</p>
<p>수년 동안(2015년부터 TypeScript 1.5부터!) TypeScript는 혼동을 피하기 위해 <code class="language-text">namespace</code> 키워드를 지원해 왔다. 이를 한 단계 더 발전시켜 TypeScript 5.2에서는 선언 파일을 생성할 때 항상 네임스페이스 키워드를 방출한다. 따라서 다음과 같이 코딩하자.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">module</span> foo <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>를 실행하면 다음과 같은 선언 파일이 생성된다.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">namespace</span> foo <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>훨씬 더 오래된 버전의 TypeScript와 호환되지 않을 수 있지만, 그 영향은 제한적일 것으로 예상된다.</p>
<p>다음과 같은 주변 모듈 선언에 유의하자.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// UNAFFECTED</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"some-module-path"</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이는 영향을 받지 않는다.</p></section><div class="TableOfContents-module--wrapper--bbb7b"><svg class="TableOfContents-module--pen--0130b" width="25" height="25" viewBox="0 0 25 25" fill="none"><g clip-path="url(#clip0_57_1249)"><path d="M15.8782 4.7029L8.85944 11.7206L8.12298 13.93L7.03965 15.0144L9.98548 17.9612L11.0688 16.8769L13.2792 16.1404L20.2969 9.12165L15.8782 4.7029ZM22.5074 8.38519C22.7026 8.58054 22.8123 8.84544 22.8123 9.12165C22.8123 9.39787 22.7026 9.66277 22.5074 9.85811L14.4042 17.9612L12.1959 18.6977L10.7219 20.1706C10.5266 20.3659 10.2617 20.4756 9.98548 20.4756C9.70927 20.4756 9.44436 20.3659 9.24902 20.1706L4.82923 15.7508C4.63395 15.5555 4.52425 15.2906 4.52425 15.0144C4.52425 14.7381 4.63395 14.4732 4.82923 14.2779L6.30215 12.805L7.03861 10.5956L15.1417 2.49249C15.3371 2.2972 15.602 2.1875 15.8782 2.1875C16.1544 2.1875 16.4193 2.2972 16.6146 2.49249L22.5074 8.38519ZM15.8782 7.64874L17.3511 9.12165L12.1949 14.2779L10.7219 12.805L15.8782 7.64874ZM4.46152 17.5935L7.40736 20.5404L5.93444 22.0133L1.51465 20.5404L4.46152 17.5935Z" fill="#15AF73"></path></g><defs><clipPath id="clip0_57_1249"><rect width="25" height="25" fill="white"></rect></clipPath></defs></svg><div class="TableOfContents-module--tableOfContents--86e5d typography-module--B7--0ed9d"><ul>
<li>
<p><a href="#using-%EC%84%A0%EC%96%B8-%EB%B0%8F-%EB%AA%85%EC%8B%9C%EC%A0%81-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EA%B4%80%EB%A6%AC-%EC%82%AC%EC%9A%A9"><code class="language-text">using</code> 선언 및 명시적 리소스 관리 사용</a></p>
</li>
<li>
<p><a href="#decorator-metadata">Decorator Metadata</a></p>
</li>
<li>
<p><a href="#%EB%AA%85%EB%AA%85%EB%90%9C-%EC%9A%94%EC%86%8C-%EB%B0%8F-%EC%9D%B5%EB%AA%85-%ED%8A%9C%ED%94%8C-%EC%9A%94%EC%86%8C">명명된 요소 및 익명 튜플 요소</a></p>
</li>
<li>
<p><a href="#%EB%B0%B0%EC%97%B4%EC%9D%98-%EC%9C%A0%EB%8B%88%EC%98%A8%EC%97%90-%EB%8D%94-%EC%89%AC%EC%9A%B4-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%82%AC%EC%9A%A9">배열의 유니온에 더 쉬운 메서드 사용</a></p>
</li>
<li>
<p><a href="#%EB%B0%B0%EC%97%B4-%EB%A9%94%EC%84%9C%EB%93%9C-%EB%B3%B5%EC%82%AC">배열 메서드 복사</a></p>
</li>
<li>
<p><a href="#symbols-as-weakmap-and-weakset-keys"><code class="language-text">symbol</code>s as <code class="language-text">WeakMap</code> and <code class="language-text">WeakSet</code> Keys</a></p>
</li>
<li>
<p><a href="#typescript-%EA%B5%AC%ED%98%84-%ED%8C%8C%EC%9D%BC-%ED%99%95%EC%9E%A5%EC%9E%90%EB%A5%BC-%EA%B0%80%EC%A7%84-%ED%83%80%EC%9E%85-%EC%A0%84%EC%9A%A9-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0-%EA%B2%BD%EB%A1%9C">TypeScript 구현 파일 확장자를 가진 타입 전용 가져오기 경로</a></p>
</li>
<li>
<p><a href="#%EA%B0%9D%EC%B2%B4-%EB%A9%A4%EB%B2%84%EC%9D%98-%EC%89%BC%ED%91%9C-%EC%99%84%EC%84%B1">객체 멤버의 쉼표 완성</a></p>
</li>
<li>
<p><a href="#%EC%9D%B8%EB%9D%BC%EC%9D%B8-%EB%B3%80%EC%88%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81">인라인 변수 리팩토링</a></p>
</li>
<li>
<p><a href="#%ED%81%B4%EB%A6%AD-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%9D%B8%EB%A0%88%EC%9D%B4-%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98-%ED%9E%8C%ED%8A%B8">클릭 가능한 인레이 매개변수 힌트</a></p>
</li>
<li>
<p><a href="#%EC%A7%80%EC%86%8D%EC%A0%81%EC%9D%B8-%ED%83%80%EC%9E%85-%ED%98%B8%ED%99%98%EC%84%B1-%ED%99%95%EC%9D%B8-%EC%B5%9C%EC%A0%81%ED%99%94">지속적인 타입 호환성 확인 최적화</a></p>
</li>
<li>
<p><a href="#%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD-%EB%B0%8F-%EC%98%A4%EB%A5%98-%EC%88%98%EC%A0%95">변경 사항 및 오류 수정</a></p>
<ul>
<li><a href="#libdts-changes"><code class="language-text">lib.d.ts Changes</code></a></li>
<li><a href="#labeledelementdeclarations%EC%9D%80-undefined-%EC%9A%94%EC%86%8C%EB%A5%BC-%EB%B3%B4%EC%9C%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%8C"><code class="language-text">labeledElementDeclarations</code>은 <code class="language-text">undefined</code> 요소를 보유할 수 있음</a></li>
<li><a href="#module%EA%B3%BC-moduleresolution%EB%8A%94-%EC%B5%9C%EA%B7%BC-nodejs-%EC%84%A4%EC%A0%95%EC%97%90%EC%84%9C-%EC%9D%BC%EC%B9%98%ED%95%B4%EC%95%BC-%ED%95%9C%EB%8B%A4"><code class="language-text">module</code>과 <code class="language-text">moduleResolution</code>는 최근 Node.js 설정에서 일치해야 한다.</a></li>
<li><a href="#%EB%B3%91%ED%95%A9%EB%90%9C-%EA%B8%B0%ED%98%B8%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%BC%EA%B4%80%EB%90%9C-export-%ED%99%95%EC%9D%B8">병합된 기호에 대한 일관된 export 확인</a></li>
<li><a href="#module-%ED%95%AD%EC%83%81-namespace%EB%A1%9C-%EB%B0%A9%EC%B6%9C"><code class="language-text">module</code> 항상 <code class="language-text">namespace</code>로 방출</a></li>
</ul>
</li>
</ul></div></div></div><hr class="Post-module--divider--c81f5"/><section class="Post-module--bio--f3d06"><div class="ProfileCard-module--wrapper--66efd"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained ProfileCard-module--postProfileImage--5c59c"><div style="max-width:100px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;100&#x27;%20width=&#x27;100&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#d8d8e8;position:absolute;top:0;left:0;bottom:0;right:0;object-fit:fill"></div><picture><source type="image/webp" data-srcset="/static/b10e8f2b1ae0054584b80cce2ee4067e/2fa99/elon.webp 25w,/static/b10e8f2b1ae0054584b80cce2ee4067e/dbc4a/elon.webp 50w,/static/b10e8f2b1ae0054584b80cce2ee4067e/d8057/elon.webp 100w,/static/b10e8f2b1ae0054584b80cce2ee4067e/2e34e/elon.webp 200w" sizes="(min-width: 100px) 100px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;opacity:0" sizes="(min-width: 100px) 100px, 100vw" decoding="async" loading="lazy" data-src="/static/b10e8f2b1ae0054584b80cce2ee4067e/e07e1/elon.jpg" data-srcset="/static/b10e8f2b1ae0054584b80cce2ee4067e/74ef0/elon.jpg 25w,/static/b10e8f2b1ae0054584b80cce2ee4067e/6ac16/elon.jpg 50w,/static/b10e8f2b1ae0054584b80cce2ee4067e/e07e1/elon.jpg 100w,/static/b10e8f2b1ae0054584b80cce2ee4067e/dd515/elon.jpg 200w" alt="일론 머스크"/></picture><noscript><picture><source type="image/webp" srcSet="/static/b10e8f2b1ae0054584b80cce2ee4067e/2fa99/elon.webp 25w,/static/b10e8f2b1ae0054584b80cce2ee4067e/dbc4a/elon.webp 50w,/static/b10e8f2b1ae0054584b80cce2ee4067e/d8057/elon.webp 100w,/static/b10e8f2b1ae0054584b80cce2ee4067e/2e34e/elon.webp 200w" sizes="(min-width: 100px) 100px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;opacity:0" sizes="(min-width: 100px) 100px, 100vw" decoding="async" loading="lazy" src="/static/b10e8f2b1ae0054584b80cce2ee4067e/e07e1/elon.jpg" srcSet="/static/b10e8f2b1ae0054584b80cce2ee4067e/74ef0/elon.jpg 25w,/static/b10e8f2b1ae0054584b80cce2ee4067e/6ac16/elon.jpg 50w,/static/b10e8f2b1ae0054584b80cce2ee4067e/e07e1/elon.jpg 100w,/static/b10e8f2b1ae0054584b80cce2ee4067e/dd515/elon.jpg 200w" alt="일론 머스크"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><div><h1 class="Heading-module--name--70a89 typography-module--D1--c5dd7">Hustle-dev</h1><p class="Description-module--description--25e5f typography-module--B3--64106 ProfileCard-module--postDescription--cb677">It is possible for ordinary people to choose to be extraordinary.</p><div class="ProfileCard-module--iconWrapper--48ab7"><a href="mailto:dlwoabsdk@gmail.com" target="_blank" class="IconWrapper-module--profileIcon--2b3ea" rel="noreferrer"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="my-class"><path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 6L12 13L2 6" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://www.facebook.com/jeongminiminimini/" target="_blank" class="IconWrapper-module--profileIcon--2b3ea" rel="noreferrer"><svg width="15" height="25" viewBox="0 0 15 25" fill="none" class="my-class"><path d="M13.375 1H10C8.50816 1 7.07742 1.59263 6.02252 2.64752C4.96763 3.70242 4.375 5.13316 4.375 6.625V10H1V14.5H4.375V23.5H8.875V14.5H12.25L13.375 10H8.875V6.625C8.875 6.32663 8.99353 6.04048 9.2045 5.82951C9.41548 5.61853 9.70163 5.5 10 5.5H13.375V1Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://www.linkedin.com/in/jeongmin-lee-5ab898202/" target="_blank" class="IconWrapper-module--profileIcon--2b3ea" rel="noreferrer"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="my-class"><path d="M16.6667 8.33301C18.3244 8.33301 19.9141 8.99149 21.0862 10.1636C22.2583 11.3357 22.9167 12.9254 22.9167 14.583V21.8747H18.7501V14.583C18.7501 14.0305 18.5306 13.5006 18.1399 13.1099C17.7492 12.7192 17.2193 12.4997 16.6667 12.4997C16.1142 12.4997 15.5843 12.7192 15.1936 13.1099C14.8029 13.5006 14.5834 14.0305 14.5834 14.583V21.8747H10.4167V14.583C10.4167 12.9254 11.0752 11.3357 12.2473 10.1636C13.4194 8.99149 15.0091 8.33301 16.6667 8.33301Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6.24992 9.375H2.08325V21.875H6.24992V9.375Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4.16659 6.24967C5.31718 6.24967 6.24992 5.31693 6.24992 4.16634C6.24992 3.01575 5.31718 2.08301 4.16659 2.08301C3.01599 2.08301 2.08325 3.01575 2.08325 4.16634C2.08325 5.31693 3.01599 6.24967 4.16659 6.24967Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://github.com/hustle-dev" target="_blank" class="IconWrapper-module--profileIcon--2b3ea" rel="noreferrer"><svg width="19" height="21" viewBox="0 0 19 21" fill="none" class="my-class"><path d="M7.10256 17.2892C2.74359 18.6446 2.74359 15.0302 1 14.5783M13.2051 20V16.503C13.2378 16.0722 13.1817 15.639 13.0404 15.2324C12.8991 14.8257 12.6759 14.4549 12.3856 14.1446C15.1231 13.8284 18 12.7531 18 7.81935C17.9998 6.55776 17.5316 5.34454 16.6923 4.43082C17.0897 3.32706 17.0616 2.10705 16.6138 1.02421C16.6138 1.02421 15.5851 0.707947 13.2051 2.36155C11.207 1.80025 9.10071 1.80025 7.10256 2.36155C4.72256 0.707947 3.69385 1.02421 3.69385 1.02421C3.24607 2.10705 3.21797 3.32706 3.61538 4.43082C2.76985 5.35132 2.30117 6.5755 2.30769 7.84646C2.30769 12.744 5.18462 13.8193 7.92205 14.1717C7.63523 14.4789 7.41402 14.8453 7.27283 15.2469C7.13164 15.6486 7.07363 16.0766 7.10256 16.503V20" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div></div></section><div id="comment"></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/translate-ts-5-2/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-b0098bb7944c9d506a41.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-8fa7fc292b99e364f0ed.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-9a877a81db8191330309.js\"],\"component---src-templates-post-tsx\":[\"/component---src-templates-post-tsx-565883aef0054caa4d77.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="757f4243d1e69c4d9757";</script><script src="/webpack-runtime-2ab619cfb788f7dc129a.js" async></script><script src="/framework-8547c74d7588696dd3c6.js" async></script><script src="/app-b0098bb7944c9d506a41.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>