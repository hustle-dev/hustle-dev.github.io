<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.12.11"/><meta name="description" content="이번에 릴리즈된 Yarn 4.0을 읽어보면서 모르는 개념을 같이 학습한 글입니다." data-gatsby-head="true"/><meta name="image" content="https://hustle-dev.github.io/static/440faa69e06c086eefcc63b59375a2e9/280ad/heroImage.png" data-gatsby-head="true"/><meta property="og:title" content="Yarn 4.0 릴리즈를 읽어보면서" data-gatsby-head="true"/><meta property="og:description" content="이번에 릴리즈된 Yarn 4.0을 읽어보면서 모르는 개념을 같이 학습한 글입니다." data-gatsby-head="true"/><meta property="og:type" content="blog" data-gatsby-head="true"/><meta property="og:url" content="https://hustle-dev.github.io/posts/release-yarn4/" data-gatsby-head="true"/><meta property="og:image" content="https://hustle-dev.github.io/static/440faa69e06c086eefcc63b59375a2e9/280ad/heroImage.png" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="Yarn 4.0 릴리즈를 읽어보면서" data-gatsby-head="true"/><meta name="twitter:description" content="이번에 릴리즈된 Yarn 4.0을 읽어보면서 모르는 개념을 같이 학습한 글입니다." data-gatsby-head="true"/><meta property="twitter:image" content="https://hustle-dev.github.io/static/440faa69e06c086eefcc63b59375a2e9/280ad/heroImage.png" data-gatsby-head="true"/><style data-href="/styles.86449fb66bb9d81ddf74.css" data-identity="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Fira+Code:wght@500&display=swap);code[class*=language-],pre[class*=language-]{background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;tab-size:4}pre[class*=language-]{margin:.5em 0}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.entity{cursor:help}.token.inserted{color:green}*,:after,:before{box-sizing:border-box}*{margin:0}body,html{height:100%}body{-webkit-font-smoothing:antialiased;line-height:1.5}canvas,img,picture,svg,video{display:block;max-width:100%}button,input,select,textarea{font:inherit}h1,h2,h3,h4,h5,h6,p{overflow-wrap:break-word}#___gatsby{isolation:isolate}@font-face{font-display:block;font-family:Pretendard;font-style:normal;font-weight:700;src:url(/fonts/Pretendard-Bold.subset.woff2) format("woff2")}@font-face{font-display:block;font-family:Pretendard;font-style:normal;font-weight:600;src:url(/fonts/Pretendard-SemiBold.subset.woff2) format("woff2")}@font-face{font-display:block;font-family:Pretendard;font-style:normal;font-weight:500;src:url(/fonts/Pretendard-Medium.subset.woff2) format("woff2")}@font-face{font-display:block;font-family:Pretendard;font-style:normal;font-weight:400;src:url(/fonts/Pretendard-Regular.subset.woff2) format("woff2")}@font-face{font-display:block;font-family:Tenada;font-style:normal;font-weight:400;src:url(/fonts/Tenada.woff2) format("woff2")}:root{--primary-c1:#15af73;--primary-c2:#f7f2ef;--background:#fff;--tag-background:#fff;--article-background:#fff;--black:#151414;--gray-1:#f6f6f6;--gray-2:#c5c5c5;--gray-3:#9e9e9e;--gray-4:#747474;--gray-5:#2f2f2f;--gray-6:#232323;--icon-color:#000}[dark-mode]{--background:#2f2f2f;--tag-background:transparent;--article-background:#232323;--black:#151414;--gray-1:#fff;--gray-2:#c5c5c5;--gray-3:#aaa;--gray-4:#c5c5c5;--gray-5:#fff;--icon-color:#fff}::selection{background-color:rgba(21,175,115,.2)}body{background-color:var(--background);font-family:Pretendard,-apple-system,BlinkMacSystemFont,system-ui,Roboto,Helvetica Neue,Segoe UI,Apple SD Gothic Neo,Noto Sans KR,Malgun Gothic,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,sans-serif;transition:.1s}hr{background-color:var(--gray-2);border:0;display:block;height:.5px;margin-bottom:30px;margin-top:30px;width:100%}code[class*=language-],pre[class*=language-]{word-wrap:normal;border-radius:5px;color:#d6deeb;font-family:Fira Code,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:.875rem;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:rgba(29,59,83,.99);text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{background:#011627;color:#fff;margin-bottom:16px;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{background-color:var(--tag-background);border:1px solid var(--primary-c1);border-radius:.2em;color:var(--primary-c1);margin:0 .2em;padding:.1em .4em;vertical-align:middle;white-space:normal}:not(pre)>code[class*=language-]::selection{background-color:rgba(21,175,115,.2)}h1 code[class*=language-],h2 code[class*=language-],h3 code[class*=language-],h4 code[class*=language-]{all:unset;font-family:Tenada}.token.cdata,.token.comment,.token.prolog{color:#637777;font-style:italic}.token.punctuation{color:#c792ea}.namespace{color:#b2ccd6}.token.deleted{color:rgba(239,83,80,.56);font-style:italic}.token.property,.token.symbol{color:#80cbc4}.token.keyword,.token.operator,.token.tag{color:#7fdbca}.token.boolean{color:#ff5874}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.doctype,.token.selector{color:#c792ea;font-style:italic}.token.attr-name,.token.inserted{color:#addb67;font-style:italic}.language-css .token.string,.style .token.string,.token.entity,.token.string,.token.url{color:#addb67}.token.atrule,.token.attr-value,.token.class-name{color:#ffcb8b}.token.important,.token.regex,.token.variable{color:#d6deeb}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.Footer-module--footer--b93ce{font-family:Tenada;font-size:2.1875rem;font-weight:800;margin:0 auto;max-width:1400px;min-width:260px;padding:50px 20px 20px;text-align:center}@media screen and (min-width:31.25rem){.Footer-module--footer--b93ce{padding:50px 60px 20px}}.Footer-module--footer--b93ce .Footer-module--copyRight--2770d{color:var(--gray-3);font-size:1rem}.Footer-module--footer--b93ce .Footer-module--designedBy--fdd55{color:var(--gray-2);display:block;font-size:.5rem;text-align:right;transition:.1s}.Header-module--header--e83f0{min-width:300px}.Header-module--header--e83f0.Header-module--fixed--b7669{backdrop-filter:blur(5.5px);-webkit-backdrop-filter:blur(5.5px);background-color:hsla(0,0%,100%,.2);position:sticky;top:0;width:100%;z-index:1}.Header-module--header--e83f0 .Header-module--wrapper--df00d{display:flex;justify-content:space-between;padding:20px}@media screen and (min-width:31.25rem){.Header-module--header--e83f0 .Header-module--wrapper--df00d{padding:20px 60px}}.Header-module--header--e83f0 .Header-module--wrapper--df00d .Header-module--headingLink--c7875{text-decoration:none}.Header-module--header--e83f0 .Header-module--wrapper--df00d .Header-module--headingLink--c7875 .Header-module--headingWrapper--c8279{align-items:center;display:flex;gap:8px}.Header-module--header--e83f0 .Header-module--wrapper--df00d .Header-module--headingLink--c7875 .Header-module--headingWrapper--c8279 .Header-module--heading--986f8{color:var(--primary-c1);display:inline-block;font-family:Tenada;font-size:.8125rem;font-weight:800;line-height:1.125rem;margin-top:2px}.Header-module--header--e83f0 .Header-module--wrapper--df00d .Header-module--headerButtons--9a875{align-items:center;display:flex;gap:14px}@media screen and (min-width:31.25rem){.Header-module--header--e83f0 .Header-module--wrapper--df00d .Header-module--headerButtons--9a875{gap:28px}}.Header-module--header--e83f0 .Header-module--wrapper--df00d .Header-module--headerButtons--9a875 .Header-module--icon--657d7 path{fill:var(--icon-color);stroke:var(--icon-color)}.Header-module--header--e83f0 .Header-module--wrapper--df00d .Header-module--headerButtons--9a875 .Header-module--iconButton--48d61{all:unset;cursor:pointer}.Header-module--header--e83f0 .Header-module--wrapper--df00d .Header-module--headerButtons--9a875 .Header-module--iconButton--48d61:focus{border-radius:2px;outline:2px solid -webkit-focus-ring-color;outline-offset:1px}.Header-module--header--e83f0 .Header-module--wrapper--df00d .Header-module--headerButtons--9a875 .Header-module--iconButton--48d61:focus:not(:focus-visible){outline:none}.Header-module--header--e83f0 .Header-module--progressBar--198ca{background-color:var(--primary-c1);height:2px;width:var(--progress-width)}.NotFound-module--page--423e3{color:#232129;font-family:-apple-system,Roboto,sans-serif,serif;padding:96px}.NotFound-module--page--423e3 .NotFound-module--heading--e0fe3{margin-bottom:64px;margin-top:0;max-width:320px}.NotFound-module--page--423e3 .NotFound-module--paragraph--23d7a{margin-bottom:48px}.NotFound-module--page--423e3 .NotFound-module--paragraph--23d7a .NotFound-module--code--f59cd{background-color:#fff4db;border-radius:4px;color:#8a6534;font-size:1.25rem;padding:4px}.FloatingButton-module--floatingButton--8fc0b{align-items:center;background-color:var(--primary-c1);border:0;border-radius:50%;bottom:50px;box-shadow:0 0 4px rgba(0,0,0,.25);cursor:pointer;display:flex;height:48px;justify-content:center;opacity:0;pointer-events:none;position:fixed;right:50px;transform:translateY(20px);transition:opacity .2s,transform .2s;width:48px;z-index:10}.FloatingButton-module--floatingButton--8fc0b:hover{background-color:#15bc7c}.FloatingButton-module--floatingButton--8fc0b.FloatingButton-module--visible--e951f{opacity:1;pointer-events:auto;transform:translateY(0)}@media screen and (min-width:62.5rem){.FloatingButton-module--floatingButton--8fc0b{height:64px;width:64px}}.Description-module--description--0320c{color:var(--gray-3);font-size:.9375rem;font-weight:600;margin-top:20px}.Heading-module--name--fe536{color:var(--primary-c1);font-family:Tenada;font-size:2.1875rem;font-weight:800}.IconWrapper-module--profileIcon--6cfc9{align-items:center;border-radius:30%;display:flex;height:30px;justify-content:center;transition:.1s;width:30px}.IconWrapper-module--profileIcon--6cfc9:hover{background-color:rgba(21,175,115,.1)}.ProfileCard-module--wrapper--edfc1{display:flex;flex-direction:column;gap:20px;min-width:260px}@media screen and (min-width:31.25rem){.ProfileCard-module--wrapper--edfc1{flex-direction:row}}.ProfileCard-module--wrapper--edfc1 .ProfileCard-module--postProfileImage--4a121{display:block;flex-shrink:0;height:100px;margin:0 10px 0 0;width:100px}.ProfileCard-module--wrapper--edfc1 .ProfileCard-module--postProfileImage--4a121 img{border-radius:50%}.ProfileCard-module--wrapper--edfc1 .ProfileCard-module--postDescription--7d431{height:46px;margin-top:0}.ProfileCard-module--wrapper--edfc1 .ProfileCard-module--iconWrapper--d0fd6{display:flex;margin-top:16px}.ProfileCard-module--card--3d81d{min-width:260px}@media screen and (min-width:62.5rem){.ProfileCard-module--card--3d81d{max-width:260px}}.ProfileCard-module--card--3d81d .ProfileCard-module--info--32e1d{align-items:baseline;display:flex;gap:5px;margin-top:25px}.ProfileCard-module--card--3d81d .ProfileCard-module--info--32e1d .ProfileCard-module--profileImage--4692c img{border-radius:50%}.Tag-module--tag--55cfc{background-color:var(--tag-background);border:1px solid var(--primary-c1);border-radius:5px;color:var(--primary-c1);font-size:.8125rem;font-weight:600;padding:0 12px 2px}.Date-module--date--d77e7{color:var(--gray-4)}.Description-module--description--ecdc9{-webkit-box-orient:vertical;-webkit-line-clamp:2;word-wrap:break-word;color:var(--gray-3);display:-webkit-box;overflow:hidden;text-overflow:ellipsis}.TagList-module--tagList--4ae6b{display:flex;gap:5px;padding:0}.Title-module--title--8cf89{color:var(--gray-5)}.Post-module--articleLink--b5ab5{text-decoration:none}.Post-module--articleLink--b5ab5 .Post-module--cardDate--c6c0c,.Post-module--articleLink--b5ab5 .Post-module--cardDescription--72eec,.Post-module--articleLink--b5ab5 .Post-module--cardTitle--ba640,.Post-module--articleLink--b5ab5 .Post-module--itemDate--33d77,.Post-module--articleLink--b5ab5 .Post-module--itemDescription--3070b,.Post-module--articleLink--b5ab5 .Post-module--itemTitle--e1aa8{text-decoration:underline;text-decoration-color:transparent;transition:.1s}.Post-module--articleLink--b5ab5:focus .Post-module--cardDate--c6c0c,.Post-module--articleLink--b5ab5:focus .Post-module--cardDescription--72eec,.Post-module--articleLink--b5ab5:focus .Post-module--cardTitle--ba640,.Post-module--articleLink--b5ab5:focus .Post-module--itemDate--33d77,.Post-module--articleLink--b5ab5:focus .Post-module--itemDescription--3070b,.Post-module--articleLink--b5ab5:focus .Post-module--itemTitle--e1aa8,.Post-module--articleLink--b5ab5:hover .Post-module--cardDate--c6c0c,.Post-module--articleLink--b5ab5:hover .Post-module--cardDescription--72eec,.Post-module--articleLink--b5ab5:hover .Post-module--cardTitle--ba640,.Post-module--articleLink--b5ab5:hover .Post-module--itemDate--33d77,.Post-module--articleLink--b5ab5:hover .Post-module--itemDescription--3070b,.Post-module--articleLink--b5ab5:hover .Post-module--itemTitle--e1aa8{text-decoration-color:var(--gray-5)}.Post-module--articleLink--b5ab5 .Post-module--card--a4c01{background-color:var(--article-background);border-radius:10px;box-shadow:0 3px 15px rgba(0,0,0,.1);flex:1 1 420px;height:420px;max-width:420px;min-width:325px;overflow:hidden}.Post-module--articleLink--b5ab5 .Post-module--card--a4c01 .Post-module--cardImage--a596d{height:208px}.Post-module--articleLink--b5ab5 .Post-module--card--a4c01 .Post-module--cardImage--a596d img{border-top-left-radius:10px;border-top-right-radius:10px}.Post-module--articleLink--b5ab5 .Post-module--card--a4c01 .Post-module--cardCaption--0aa11{padding:0 20px 28px;position:relative}.Post-module--articleLink--b5ab5 .Post-module--card--a4c01 .Post-module--cardCaption--0aa11 .Post-module--cardDate--c6c0c{display:inline-block;font-size:.8125rem;font-weight:600;position:absolute;right:20px;top:4px}.Post-module--articleLink--b5ab5 .Post-module--card--a4c01 .Post-module--cardCaption--0aa11 .Post-module--cardTagList--5f1d7{margin-top:23px;width:80%}.Post-module--articleLink--b5ab5 .Post-module--card--a4c01 .Post-module--cardCaption--0aa11 .Post-module--cardTitle--ba640{font-size:1.375rem;font-weight:700;margin-left:4px;margin-top:20px}.Post-module--articleLink--b5ab5 .Post-module--card--a4c01 .Post-module--cardCaption--0aa11 .Post-module--cardDescription--72eec{font-size:.875rem;font-weight:600;height:2.5rem;line-height:1.25rem;margin-left:4px;margin-top:20px;width:90%}.Post-module--articleLink--b5ab5 .Post-module--item--967c1{background-color:var(--article-background);border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,.1);flex:1 1;min-height:165px;min-width:300px;padding:20px;position:relative}.Post-module--articleLink--b5ab5 .Post-module--item--967c1 .Post-module--itemFigure--61e4d{display:flex;justify-content:space-between;width:100%}.Post-module--articleLink--b5ab5 .Post-module--item--967c1 .Post-module--itemFigure--61e4d .Post-module--itemImage--af857{display:none!important;height:120px;min-width:190px;width:190px}@media screen and (min-width:48.75rem){.Post-module--articleLink--b5ab5 .Post-module--item--967c1 .Post-module--itemFigure--61e4d .Post-module--itemImage--af857{display:block!important}}.Post-module--articleLink--b5ab5 .Post-module--item--967c1 .Post-module--itemFigure--61e4d .Post-module--itemImage--af857 img{border-radius:10px}.Post-module--articleLink--b5ab5 .Post-module--item--967c1 .Post-module--itemFigure--61e4d .Post-module--itemCaption--6915d{flex:1 1;flex-shrink:100000;order:-1;width:100%}.Post-module--articleLink--b5ab5 .Post-module--item--967c1 .Post-module--itemFigure--61e4d .Post-module--itemCaption--6915d .Post-module--itemTitle--e1aa8{word-wrap:break-word;font-size:1.1875rem;font-weight:700;margin-left:4px;margin-top:7px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:80%}.Post-module--articleLink--b5ab5 .Post-module--item--967c1 .Post-module--itemFigure--61e4d .Post-module--itemCaption--6915d .Post-module--itemDescription--3070b{font-size:.875rem;font-weight:600;height:2.5rem;line-height:1.25rem;margin-left:4px;margin-top:1px;width:80%}.Post-module--articleLink--b5ab5 .Post-module--item--967c1 .Post-module--itemFigure--61e4d .Post-module--itemCaption--6915d .Post-module--itemDate--33d77{bottom:20px;font-size:.8125rem;font-weight:500;margin-left:4px;position:absolute}.PostList-module--postList--61751{display:flex;flex-direction:column;gap:20px;padding:0}.RecentPost-module--heading--0b9b2{display:none;font-size:1.125rem;font-weight:600}@media screen and (min-width:48.75rem){.RecentPost-module--heading--0b9b2{color:var(--gray-5);display:block}}.RecentPost-module--recentPostList--db855{display:none}@media screen and (min-width:48.75rem){.RecentPost-module--recentPostList--db855{display:flex;gap:24px;list-style:none;margin-top:25px;padding:0}}.TagButtonWithCount-module--tagButton--b55df{background-color:transparent;border:1px solid var(--gray-2);border-radius:5px;color:var(--gray-2);cursor:pointer;padding:3px 12.5px 4px;transition:.1s}.TagButtonWithCount-module--tagButton--b55df.TagButtonWithCount-module--active--ce3a5,.TagButtonWithCount-module--tagButton--b55df:hover{border-color:var(--primary-c1);color:var(--primary-c1)}.TagButtonWithCount-module--tagButton--b55df span{font-size:.875rem;font-weight:600;line-height:1.25rem}.TagList-module--tagList--da91f{display:flex;flex-wrap:wrap;gap:6px;list-style:none;padding:0}.TagList-module--tagList--da91f .TagList-module--tagItem--61853{margin-top:15px}.Home-module--main--4384c{display:flex;flex-direction:column;margin-left:auto;margin-right:auto;margin-top:50px;max-width:1400px;padding:0 20px}@media screen and (min-width:62.5rem){.Home-module--main--4384c{flex-direction:row;padding:0 60px}}@media screen and (min-width:31.25rem){.Home-module--main--4384c .Home-module--aside--79761{padding:0 40px}}@media screen and (min-width:62.5rem){.Home-module--main--4384c .Home-module--aside--79761{margin-top:150px;padding:0}}@media screen and (min-width:48.75rem){.Home-module--main--4384c .Home-module--shrinkSpace--2ee2b{height:30px}}@media screen and (min-width:62.5rem){.Home-module--main--4384c .Home-module--shrinkSpace--2ee2b{display:block;flex:1 1;max-width:150px;min-width:20px}}.Home-module--main--4384c .Home-module--wrapper--cbcbc{flex:1 1}@media screen and (min-width:31.25rem){.Home-module--main--4384c .Home-module--wrapper--cbcbc{padding:0 40px}}@media screen and (min-width:62.5rem){.Home-module--main--4384c .Home-module--wrapper--cbcbc{padding:0}}.Home-module--main--4384c .Home-module--wrapper--cbcbc .Home-module--divider--97386{display:none}@media screen and (min-width:48.75rem){.Home-module--main--4384c .Home-module--wrapper--cbcbc .Home-module--divider--97386{display:block;margin-bottom:20px;margin-top:45px}}.Home-module--main--4384c .Home-module--wrapper--cbcbc .Home-module--tagList--c441a{margin-top:20px}.Home-module--main--4384c .Home-module--wrapper--cbcbc .Home-module--postList--4f00e{margin-top:35px}.TableOfContents-module--wrapper--eb321{border-left:2px solid var(--gray-2);display:none;margin-right:-80px;max-height:calc(100vh - 180px);max-width:320px;overflow-y:auto;padding:0 10px;position:sticky;top:90px}@media screen and (min-width:87.5rem){.TableOfContents-module--wrapper--eb321{display:block}}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--pen--4e398{margin-bottom:6px}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d{font-size:.8125rem;font-weight:600}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d>ul{margin-left:auto;width:200px}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d ul{list-style:none;padding:0}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d ul ul{padding-left:10px}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d li{margin-bottom:3px}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d a{color:var(--gray-3);text-decoration:none;transition:.1s}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d a:hover{color:var(--primary-c1)}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d a.TableOfContents-module--active--17bbb{color:var(--primary-c1);display:inline-block}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d a,.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d code,.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d p{font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit}.TableOfContents-module--wrapper--eb321 .TableOfContents-module--tableOfContents--0b53d code[class*=language-]{all:unset}.TagList-module--tagList--8691e{display:flex;gap:5px;padding:0}.TagList-module--tagList--8691e .TagList-module--tag--3b781{padding:3px 12.5px 6px}.Post-module--wrapper--0f907{margin:30px auto 0;max-width:900px;min-width:300px;padding:0 20px}@media screen and (min-width:31.25rem){.Post-module--wrapper--0f907{margin-top:60px;padding:0 60px}}@media screen and (min-width:48.75rem){.Post-module--wrapper--0f907{margin-top:90px}}.Post-module--wrapper--0f907 .Post-module--title--64055{color:var(--gray-5);font-size:1.6875rem;font-size:1.875rem;font-weight:700}.Post-module--wrapper--0f907 .Post-module--date--59cac{color:var(--gray-4);font-size:.8125rem;font-size:1rem;font-weight:600;margin-top:18px}.Post-module--wrapper--0f907 .Post-module--tagList--e0dea{margin-top:25px}.Post-module--wrapper--0f907 .Post-module--heroImage--6a805{margin-top:20px;max-height:500px;min-width:300px;width:100%}.Post-module--wrapper--0f907 .Post-module--heroImage--6a805 img{border-radius:5px}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd{align-items:flex-start;display:flex;justify-content:space-between;min-width:300px}@media screen and (min-width:87.5rem){.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd{width:auto;width:1010px}}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf{--blockquote-bgColor:var(--article-background);--blockquote-color:var(--icon-color);color:var(--gray-5);font-size:1.125rem;line-height:1.5;margin-top:30px;max-width:780px;min-width:300px;word-break:break-all}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf a{color:var(--primary-c1);text-decoration:underline;text-decoration-color:transparent;transition:.1s}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf a:hover{text-decoration-color:var(--primary-c1)}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf img{border-radius:5px;display:block;margin:0 auto}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf blockquote{align-items:center;background-color:var(--blockquote-bgColor);border-radius:10px;box-shadow:0 0 7px rgba(0,0,0,.15);color:var(--blockquote-color);display:flex;gap:6px;margin-bottom:24px;margin-top:24px;padding:20px 18px 20px 15px}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf blockquote:before{content:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='21' height='21' fill='none' viewBox='0 0 21 21'%3E%3Cpath fill='%2315AF73' d='M8.087 16.622h10.288v1.75H2.625v-3.713l8.662-8.662L15 9.71l-6.912 6.912ZM12.525 4.76l1.856-1.856a.875.875 0 0 1 1.237 0l2.475 2.475a.875.875 0 0 1 0 1.237l-1.856 1.856-3.712-3.712Z'/%3E%3C/svg%3E");height:21px;margin:10px;width:21px}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf blockquote p{font-size:1rem;font-style:normal;font-weight:600;margin:0;word-break:break-all}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf:not(pre)>code[class*=language-]{padding:0 .4em}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf p{display:block;margin-bottom:16px}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf h1{border-bottom:1px solid #eee;margin-bottom:16px;margin-top:28px}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf h2{border-bottom:1px solid #eee;margin-bottom:16px;margin-top:24px}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf h2 code[class*=language-]{padding:0}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf h3{margin-bottom:16px;margin-top:16px}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf h1,.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf h2,.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf h3{scroll-margin-top:73px}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf ol,.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf ul{margin-bottom:16px}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf table{border:1px solid var(--primary-c1);border-collapse:collapse;border-radius:5px;font-size:.875rem;margin-bottom:16px;min-width:40%;width:100%}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf table tbody tr:nth-child(2n){background-color:rgba(21,175,115,.1)}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf table td,.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf table th{border:1px solid var(--primary-c1);padding:.5em;word-break:break-all}.Post-module--wrapper--0f907 .Post-module--contentWrapper--64fbd .Post-module--content--f35bf table tr>th{border-bottom:3px solid var(--primary-c1)}.Post-module--wrapper--0f907 .Post-module--bio--1d2ed{margin-bottom:50px;margin-top:60px}</style><script data-ad-client="ca-pub-8944903075236867" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LDKTNNPSGB"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LDKTNNPSGB', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=cf7a82b31395b147138599e756ed8027" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=cf7a82b31395b147138599e756ed8027"/><link rel="alternate" type="application/rss+xml" title="Hustle-dev Blog RSS Feed" href="/rss.xml"/><title data-gatsby-head="true">Yarn 4.0 릴리즈를 읽어보면서</title><link rel="canonical" href="https://hustle-dev.github.io/posts/release-yarn4/" data-gatsby-head="true"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main class="Post-module--wrapper--0f907"><h1 class="Post-module--title--64055">Yarn 4.0 릴리즈를 읽어보면서</h1><p class="Post-module--date--59cac">23.10.26</p><ul class="TagList-module--tagList--8691e Post-module--tagList--e0dea"><div class="Tag-module--tag--55cfc TagList-module--tag--3b781"><span>Yarn</span></div></ul><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained Post-module--heroImage--6a805"><div style="max-width:2884px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;1614&#x27;%20width=&#x27;2884&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;object-fit:contain" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAADEUlEQVR42h2RW2xTBRyHjw9e1i0EjLKMUnth6zo22p61p10va7udrpSta2ll7TjrDcIusg62MsD1QrN1MEjUwpQtOF1MUAny5KOJiQ++6IuJbz76qLwYiVETHj4PPnzJL/knv3z5/QVbf4FkvIbTNo9jYAG/8zLDzmUCzhVG3VcIu8uMuZeR1azIO9Q8RTY8WZrBJc6Hthh1VRkPtIgFPiByIo3QZ54i4FvA2pdTKSBZL+CyzuJW8dnn8Kv47LNExXlagSKPUk3upBoUh4pMSyUSoc9wilVCrg1OeW8hGPXj6LqimHSTmI0pzIYUx4+lsfcqiBYFqU9hwJxh3lfk6/wlFsOzZNxpJh05TloLlEN1PLYVvK5b+F23EXTaEE77C8sCDlsGOXABjyOLWR+j1xCjzzChEkO2vk3YnsTyVgSrPsJx/QgZtbTkfQfJnCDUHcRpCCEcfkNiJJBlempF3XKRfPba/1kcOI1bPIPP8cJ2AosxTK8uyIA+RI/Oj8PgJS8pKINncWpFLK+biPX4ELpVQ7v9FLI8Q2Qsz7Avw8lwkTE5R2z8HPHYOdVYLbfGsfZE6DnqxWP0UB2apOQuUHFEOW0SebPjKIpZQvCbs8QGLzIq5vD2n8FqjtLfHSYsFki4F8n6qizIN9Xd5lGkGRalJHsjSfblLLvBKb6NyFwTh2l/rQvx8DGE68F1VkdaLIXuMue/Q2FondRgmfNDm1yXP+FqYJOrboWaNE5lMMj2cJwvIik+jU7zTWKKX/Lqw044OdTWSWdHF8KzykO+m/2QJ4UWT/L3eZzf4XFul0dnWzzM3OZzpaLeynyVv8KX+RV+vFzl1/INnq41eL6+xd+Ne8QtLg6+chBtxxGEny41+Xl5ix+W3udp9QG/v3uXP6rb/HnjPv80tvl34wG/Nfb4q7kHW/s8v7nHs3qL7+fq7CRLzLkn6Dygp6PtCO0aLUI1UaeZrLEWX+O9qTr30hU+Vqp8lF5jf6bO7nSFZnyVzclVatGLlEJFRvsnOHDIhvCqiZde1tKmMaLR6NG0m/gPyWq0exLvLjwAAAAASUVORK5CYII=" alt=""/><picture><source type="image/webp" data-srcset="/static/440faa69e06c086eefcc63b59375a2e9/5c9be/heroImage.webp 721w,/static/440faa69e06c086eefcc63b59375a2e9/eadea/heroImage.webp 1442w,/static/440faa69e06c086eefcc63b59375a2e9/e6b5a/heroImage.webp 2884w" sizes="(min-width: 2884px) 2884px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:contain;opacity:0" sizes="(min-width: 2884px) 2884px, 100vw" decoding="async" loading="lazy" data-src="/static/440faa69e06c086eefcc63b59375a2e9/280ad/heroImage.png" data-srcset="/static/440faa69e06c086eefcc63b59375a2e9/69767/heroImage.png 721w,/static/440faa69e06c086eefcc63b59375a2e9/7733b/heroImage.png 1442w,/static/440faa69e06c086eefcc63b59375a2e9/280ad/heroImage.png 2884w" alt="Yarn"/></picture><noscript><picture><source type="image/webp" srcSet="/static/440faa69e06c086eefcc63b59375a2e9/5c9be/heroImage.webp 721w,/static/440faa69e06c086eefcc63b59375a2e9/eadea/heroImage.webp 1442w,/static/440faa69e06c086eefcc63b59375a2e9/e6b5a/heroImage.webp 2884w" sizes="(min-width: 2884px) 2884px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:contain;opacity:0" sizes="(min-width: 2884px) 2884px, 100vw" decoding="async" loading="lazy" src="/static/440faa69e06c086eefcc63b59375a2e9/280ad/heroImage.png" srcSet="/static/440faa69e06c086eefcc63b59375a2e9/69767/heroImage.png 721w,/static/440faa69e06c086eefcc63b59375a2e9/7733b/heroImage.png 1442w,/static/440faa69e06c086eefcc63b59375a2e9/280ad/heroImage.png 2884w" alt="Yarn"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><div class="Post-module--contentWrapper--64fbd"><section class="Post-module--content--f35bf"><!-- 썸네일 -->
<!-- 본문 -->
<p>Yarn 4.0이 출시되었다. 블로그의 글을 읽어보면서 무엇이 변경되었고 그동안 자세하게 알고싶었던 yarn에서 사용하는 개념을 알아보고자 한다.</p>
<h2 id="주요-변경-사항">주요 변경 사항</h2>
<p>yarn 4.0에선 아래와 같은 것들이 변경되었다.</p>
<ul>
<li>Node.js 18 이상 버전이 필요</li>
<li><code class="language-text">yarn init</code>으로 생성된 프로젝트에서 더 이상 Zero-install을 활성화하지 않음</li>
<li><code class="language-text">yarn init</code>으로 생성된 프로젝트는 <code class="language-text">yarnPath</code>가 아닌 <code class="language-text">Corepack</code>을 사용</li>
<li>모든 공식 플러그인(타입스크립트, 인터랙티브 도구)이 기본적으로 포함</li>
<li><code class="language-text">yarn workspace foreach</code> 명령의 구문이 약간 변경</li>
</ul>
<blockquote>
<p>읽다보니 여기서 궁금한 키워드가 생겼다. <code class="language-text">Zero-install</code>, <code class="language-text">yarnPath</code>, <code class="language-text">Corepack</code>에 대해 알아보자.</p>
</blockquote>
<h3 id="zero-install">Zero-install</h3>
<p>yarn 문서의 <a href="https://yarnpkg.com/features/caching#zero-installs">Zero-install</a>에는 <strong>브랜치 전환시 <code class="language-text">yarn install</code>을 하지 않아 발생하는 문제를 해결해주는 캐시전략 패턴이라 한다.</strong> 즉, 저장소 내 <code class="language-text">.yarn/cache</code>에 <code class="language-text">zip</code> 파일 형태로 의존성을 관리하고, 이를 <code class="language-text">.pnp.cjs</code> 파일에 정보를 등록해 어디서 의존성을 찾아야하는지 알 수 있어 따로 <code class="language-text">yarn install</code>을 해주지 않아도 된다.</p>
<p>Zero-install 개념을 찾아보다가 <a href="https://toss.tech/article/node-modules-and-yarn-berry">node_modules로부터 우리를 구원해 줄 Yarn Berry</a>를 보았는데 잘 정리되어 있어 보는 것을 추천한다. 기존 yarn v1과 npm에서 어떤 문제가 있었고 이를 해결하기 위한 Plug'n'Play(PnP)의 장점을 소개한다. 이 과정에서 yarn berry로 설치할 때 생기는 파일인 <code class="language-text">pnp.cjs</code>가 어떤 역할을 하는지, zero-install을 위해 파일을 어떻게 관리하는지 자세히 알 수 있다.</p>
<h3 id="yarnpath">yarnPath</h3>
<img width="450" alt="image" src="https://github.com/hustle-dev/hustle-dev.github.io/assets/53992007/a2090c25-f1c5-46e1-b2f9-9ea96d18a73e">
<blockquote>
<p>프로젝트안의 <code class="language-text">.yarnrc.yml</code> 파일을 볼 때마다 항상 '이 설정은 뭐지?' 라고 궁금해했다.</p>
</blockquote>
<p><a href="https://yarnpkg.com/configuration/yarnrc#yarnPath">yarnPath</a>은 글로벌 경로 대신 사용할 Yarn 바이너리의 경로이다.</p>
<p>일반적으로 <code class="language-text">yarnPath</code>은 <code class="language-text">yarnrc.yml</code>의 아래와 같은 형식으로 저장되어 있다.</p>
<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">yarnPath</span><span class="token punctuation">:</span> .yarn/releases/yarn<span class="token punctuation">-</span>3.6.4.cjs</code></pre></div>
<blockquote>
<p>여기서 <code class="language-text">yarn-3.6.4.cjs</code> 파일의 역할은 해당 프로젝트 내에서 <strong>Yarn 명령을 실행하는 데 사용되는 yarn 바이너리의 특정 버전</strong>이다. 즉, Yarn 3.6.4 버전에 대한 Yarn 실행 파일이 포함되어 있다.</p>
</blockquote>
<p>현재 공식문서에는 <code class="language-text">yarnPath</code> 설정보다 대부분의 경우 <code class="language-text">Corepack</code>을 사용하는 것이 좋다고 한다.</p>
<h3 id="corepack">Corepack</h3>
<p><a href="https://nodejs.org/api/corepack.html">Corepack</a>은 패키지 매니저 버전을 관리하는 데 도움이 되는 실험적인 도구로, node와 패키지 매니저 간 브릿지 역할을 한다.</p>
<blockquote>
<p>Corepack을 사용하면 <code class="language-text">Yarn, npm, pnpm</code>을 설치할 필요없이 사용할 수 있다.</p>
</blockquote>
<p>Corepack을 사용하면 <code class="language-text">yarn</code>을 사용하고 있는 프로젝트인데 <code class="language-text">pnpm</code>을 사용해 명령어 입력시 올바른 패키지 매니저(yarn)를 사용해 명령을 다시 실행하도록 요청한다. <code class="language-text">yarn</code>을 사용해 명령어를 입력하면 Corepack은 호환 가능한 최신 버전을 자동으로 다운로드하여 캐시한다.</p>
<h2 id="yarn-설치하기">Yarn 설치하기</h2>
<p><code class="language-text">yarnPath</code> 설정을 2.0버전부터 지원하고 권장했지만 사람들이 저장소에 이런 바이너리를 추가하는 것을 좋아하지 않았다고 한다. 따라서 Corepack이 등장하게 되었고 이는 작업 중인 프로젝트에 맞는 올바른 패키지 관리자 버전을 자동으로 선택해준다.</p>
<p>더이상 <code class="language-text">yarnPath</code>에 의존할 필요가 없고 <code class="language-text">package.json</code>의 <code class="language-text">packageManager</code> 필드를 업데이트 하도록 <code class="language-text">yarn init -2</code> 및 <code class="language-text">yarn set version</code> 명령이 업데이트 되었다.</p>
<blockquote>
<p>Corepack은 <code class="language-text">package.json</code>의 <code class="language-text">packageManager</code> 필드를 보고 어떤 패키지 관리자 버전을 사용할지 알 수 있다. 이 필드는 보통 <code class="language-text">corepack use yarn@x.y.z</code> 명령어를 활용해 설정된다.</p>
</blockquote>
<h2 id="강화모드">강화모드</h2>
<p>yarn 4.0에선 사용자를 보호하기 위해 강화모드를 도입했다. 여기서 두 가지 추가 유효성 검사를 수행한다.</p>
<ul>
<li>lockfile에 저장된 resolution이 해당 범위로 resolve 될 수 있는 것과 일치하는지 검증한다.</li>
<li>lockfile에 저장된 패키지 메타데이터가 원격 레지스트리 메타데이터와 일치하는지 확인한다.</li>
</ul>
<p>이를 통해 공격자가 yarn을 사용해 프로젝트에 PR을 할 때 잠금 파일을 몰래 수정하는 것을 방지할 수 있다.</p>
<blockquote>
<p><a href="https://snyk.io/blog/why-npm-lockfiles-can-be-a-security-blindspot-for-injecting-malicious-modules/">예시</a>에선 github PR에서 <code class="language-text">yarn.lock</code>파일이 <code class="language-text">Load diff</code> 뜨면서 무엇을 수정했는지 알 수 없어서 이 부분이 취약점이 될 수 있음을 말함</p>
</blockquote>
<p>강화모드는 <code class="language-text">enableHardenedMode</code>를 켜서 활성화할 수 있고, <code class="language-text">yarnrc</code> 파일에서 명시적으로 해제하여 비활성화할 수 있다. 다만 이 제약 조건은 많은 네트워크 요청을 수행해야해서 CI와 같은 환경에서는 환경 변수를 통해 기본적으로 활성화하지 않게 할 수 있다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">export YARN_ENABLE_HARDENED_MODE=1</code></pre></div>
<h2 id="js-제약조건">JS 제약조건</h2>
<p>기존 yarn에서는 <a href="https://en.wikipedia.org/wiki/Prolog#Rules_and_facts">Prolog</a>라는 <a href="https://yarnpkg.com/features/constraints">constraints engine</a>을 사용했다.</p>
<blockquote>
<p>여기서 constraints engine이란 <strong>모든 워크스페이스에 자동으로 특정한 규칙을 적용하기 위한 것</strong>이다.</p>
</blockquote>
<p>그러나 이는 사용하기 매우 복잡해 Yarn 4부터 더 이상 사용되지 않고 TS를 지원하는 새 JS기반 엔진으로 대체되었다.</p>
<p>새로운 선택 사항인 <code class="language-text">enableConstraintsChecks</code> 설정은 Yarn이 Yarn 설치의 일부로 제약 조건을 실행하도록 한다. 원격 CI가 오류를 발생시킬 때까지 기다리기 전에 오류를 발견할 수 있는 편리한 방법이며, 새 엔진이 매우 빠르기 때문에 설치 시간에 거의 영향을 미치지 않는다고 한다.</p>
<h2 id="타입스크립트-통합-인터렉티브-도구">타입스크립트 통합, 인터렉티브 도구</h2>
<p>이제 플러그인 없이 <code class="language-text">yarn upgrade-interactive</code>와 <code class="language-text">yarn stage</code>를 사용할 수 있고, 프로젝트에 TS가 구성되어 있는 경우 <code class="language-text">yarn</code>은 종속성을 업데이트할 때마다 필요에 따라 <code class="language-text">@types</code> 패키지를 자동으로 추가 및 제거한다.</p>
<h2 id="성능">성능</h2>
<p>제시된 상황(콜드 캐시에서 개츠비와 약 350MiB 종속성 트리를 설치)에서 기존 3.6버전 보다 설치 속도가 약 3배 빨라졌다. 이는 대부분의 시나리오에서 <code class="language-text">pnpm</code>만큼 빨라진 결과를 보인다고 한다.</p>
<h2 id="참고링크">참고링크</h2>
<ul>
<li><a href="https://yarnpkg.com/blog/release/4.0">Release: Yarn 4.0</a></li>
<li><a href="https://toss.tech/article/node-modules-and-yarn-berry">node_modules로부터 우리를 구원해 줄 Yarn Berry</a></li>
<li><a href="https://github.com/nodejs/corepack">nodejs/corepack</a></li>
</ul></section><div class="TableOfContents-module--wrapper--eb321"><svg class="TableOfContents-module--pen--4e398" width="25" height="25" viewBox="0 0 25 25" fill="none"><g clip-path="url(#clip0_57_1249)"><path d="M15.8782 4.7029L8.85944 11.7206L8.12298 13.93L7.03965 15.0144L9.98548 17.9612L11.0688 16.8769L13.2792 16.1404L20.2969 9.12165L15.8782 4.7029ZM22.5074 8.38519C22.7026 8.58054 22.8123 8.84544 22.8123 9.12165C22.8123 9.39787 22.7026 9.66277 22.5074 9.85811L14.4042 17.9612L12.1959 18.6977L10.7219 20.1706C10.5266 20.3659 10.2617 20.4756 9.98548 20.4756C9.70927 20.4756 9.44436 20.3659 9.24902 20.1706L4.82923 15.7508C4.63395 15.5555 4.52425 15.2906 4.52425 15.0144C4.52425 14.7381 4.63395 14.4732 4.82923 14.2779L6.30215 12.805L7.03861 10.5956L15.1417 2.49249C15.3371 2.2972 15.602 2.1875 15.8782 2.1875C16.1544 2.1875 16.4193 2.2972 16.6146 2.49249L22.5074 8.38519ZM15.8782 7.64874L17.3511 9.12165L12.1949 14.2779L10.7219 12.805L15.8782 7.64874ZM4.46152 17.5935L7.40736 20.5404L5.93444 22.0133L1.51465 20.5404L4.46152 17.5935Z" fill="#15AF73"></path></g><defs><clipPath id="clip0_57_1249"><rect width="25" height="25" fill="white"></rect></clipPath></defs></svg><div class="TableOfContents-module--tableOfContents--0b53d"><ul>
<li>
<p><a href="#%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD-%EC%82%AC%ED%95%AD">주요 변경 사항</a></p>
<ul>
<li><a href="#zero-install">Zero-install</a></li>
<li><a href="#yarnpath">yarnPath</a></li>
<li><a href="#corepack">Corepack</a></li>
</ul>
</li>
<li>
<p><a href="#yarn-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0">Yarn 설치하기</a></p>
</li>
<li>
<p><a href="#%EA%B0%95%ED%99%94%EB%AA%A8%EB%93%9C">강화모드</a></p>
</li>
<li>
<p><a href="#js-%EC%A0%9C%EC%95%BD%EC%A1%B0%EA%B1%B4">JS 제약조건</a></p>
</li>
<li>
<p><a href="#%ED%83%80%EC%9E%85%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%ED%86%B5%ED%95%A9-%EC%9D%B8%ED%84%B0%EB%A0%89%ED%8B%B0%EB%B8%8C-%EB%8F%84%EA%B5%AC">타입스크립트 통합, 인터렉티브 도구</a></p>
</li>
<li>
<p><a href="#%EC%84%B1%EB%8A%A5">성능</a></p>
</li>
<li>
<p><a href="#%EC%B0%B8%EA%B3%A0%EB%A7%81%ED%81%AC">참고링크</a></p>
</li>
</ul></div></div></div><section class="Post-module--bio--1d2ed"><div class="ProfileCard-module--wrapper--edfc1"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained ProfileCard-module--postProfileImage--4a121"><div style="max-width:100px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;100&#x27;%20width=&#x27;100&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#d8d8e8;position:absolute;top:0;left:0;bottom:0;right:0;object-fit:fill"></div><picture><source type="image/webp" data-srcset="/static/b10e8f2b1ae0054584b80cce2ee4067e/2fa99/elon.webp 25w,/static/b10e8f2b1ae0054584b80cce2ee4067e/dbc4a/elon.webp 50w,/static/b10e8f2b1ae0054584b80cce2ee4067e/d8057/elon.webp 100w,/static/b10e8f2b1ae0054584b80cce2ee4067e/2e34e/elon.webp 200w" sizes="(min-width: 100px) 100px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;opacity:0" sizes="(min-width: 100px) 100px, 100vw" decoding="async" loading="lazy" data-src="/static/b10e8f2b1ae0054584b80cce2ee4067e/e07e1/elon.jpg" data-srcset="/static/b10e8f2b1ae0054584b80cce2ee4067e/74ef0/elon.jpg 25w,/static/b10e8f2b1ae0054584b80cce2ee4067e/6ac16/elon.jpg 50w,/static/b10e8f2b1ae0054584b80cce2ee4067e/e07e1/elon.jpg 100w,/static/b10e8f2b1ae0054584b80cce2ee4067e/dd515/elon.jpg 200w" alt="일론 머스크"/></picture><noscript><picture><source type="image/webp" srcSet="/static/b10e8f2b1ae0054584b80cce2ee4067e/2fa99/elon.webp 25w,/static/b10e8f2b1ae0054584b80cce2ee4067e/dbc4a/elon.webp 50w,/static/b10e8f2b1ae0054584b80cce2ee4067e/d8057/elon.webp 100w,/static/b10e8f2b1ae0054584b80cce2ee4067e/2e34e/elon.webp 200w" sizes="(min-width: 100px) 100px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="object-fit:fill;opacity:0" sizes="(min-width: 100px) 100px, 100vw" decoding="async" loading="lazy" src="/static/b10e8f2b1ae0054584b80cce2ee4067e/e07e1/elon.jpg" srcSet="/static/b10e8f2b1ae0054584b80cce2ee4067e/74ef0/elon.jpg 25w,/static/b10e8f2b1ae0054584b80cce2ee4067e/6ac16/elon.jpg 50w,/static/b10e8f2b1ae0054584b80cce2ee4067e/e07e1/elon.jpg 100w,/static/b10e8f2b1ae0054584b80cce2ee4067e/dd515/elon.jpg 200w" alt="일론 머스크"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><div><h1 class="Heading-module--name--fe536">Hustle-dev</h1><p class="Description-module--description--0320c ProfileCard-module--postDescription--7d431">It is possible for ordinary people to choose to be extraordinary.</p><div class="ProfileCard-module--iconWrapper--d0fd6"><a href="mailto:dlwoabsdk@gmail.com" target="_blank" class="IconWrapper-module--profileIcon--6cfc9" rel="noreferrer"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="my-class"><path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 6L12 13L2 6" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://www.facebook.com/jeongminiminimini/" target="_blank" class="IconWrapper-module--profileIcon--6cfc9" rel="noreferrer"><svg width="15" height="25" viewBox="0 0 15 25" fill="none" class="my-class"><path d="M13.375 1H10C8.50816 1 7.07742 1.59263 6.02252 2.64752C4.96763 3.70242 4.375 5.13316 4.375 6.625V10H1V14.5H4.375V23.5H8.875V14.5H12.25L13.375 10H8.875V6.625C8.875 6.32663 8.99353 6.04048 9.2045 5.82951C9.41548 5.61853 9.70163 5.5 10 5.5H13.375V1Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://www.linkedin.com/in/jeongmin-lee-5ab898202/" target="_blank" class="IconWrapper-module--profileIcon--6cfc9" rel="noreferrer"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="my-class"><path d="M16.6667 8.33301C18.3244 8.33301 19.9141 8.99149 21.0862 10.1636C22.2583 11.3357 22.9167 12.9254 22.9167 14.583V21.8747H18.7501V14.583C18.7501 14.0305 18.5306 13.5006 18.1399 13.1099C17.7492 12.7192 17.2193 12.4997 16.6667 12.4997C16.1142 12.4997 15.5843 12.7192 15.1936 13.1099C14.8029 13.5006 14.5834 14.0305 14.5834 14.583V21.8747H10.4167V14.583C10.4167 12.9254 11.0752 11.3357 12.2473 10.1636C13.4194 8.99149 15.0091 8.33301 16.6667 8.33301Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6.24992 9.375H2.08325V21.875H6.24992V9.375Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4.16659 6.24967C5.31718 6.24967 6.24992 5.31693 6.24992 4.16634C6.24992 3.01575 5.31718 2.08301 4.16659 2.08301C3.01599 2.08301 2.08325 3.01575 2.08325 4.16634C2.08325 5.31693 3.01599 6.24967 4.16659 6.24967Z" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://github.com/hustle-dev" target="_blank" class="IconWrapper-module--profileIcon--6cfc9" rel="noreferrer"><svg width="19" height="21" viewBox="0 0 19 21" fill="none" class="my-class"><path d="M7.10256 17.2892C2.74359 18.6446 2.74359 15.0302 1 14.5783M13.2051 20V16.503C13.2378 16.0722 13.1817 15.639 13.0404 15.2324C12.8991 14.8257 12.6759 14.4549 12.3856 14.1446C15.1231 13.8284 18 12.7531 18 7.81935C17.9998 6.55776 17.5316 5.34454 16.6923 4.43082C17.0897 3.32706 17.0616 2.10705 16.6138 1.02421C16.6138 1.02421 15.5851 0.707947 13.2051 2.36155C11.207 1.80025 9.10071 1.80025 7.10256 2.36155C4.72256 0.707947 3.69385 1.02421 3.69385 1.02421C3.24607 2.10705 3.21797 3.32706 3.61538 4.43082C2.76985 5.35132 2.30117 6.5755 2.30769 7.84646C2.30769 12.744 5.18462 13.8193 7.92205 14.1717C7.63523 14.4789 7.41402 14.8453 7.27283 15.2469C7.13164 15.6486 7.07363 16.0766 7.10256 16.503V20" stroke="#15AF73" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div></div></section><div id="comment"></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/release-yarn4/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-eb4a8bd7a4c504a0ca8d.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-7166073270bcf076e7f8.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-e0420cf88358cf6f0e9e.js\"],\"component---src-templates-post-tsx\":[\"/component---src-templates-post-tsx-226cccf574d5f4ae18a9.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="94b36d53778ad5dfecdb";</script><script src="/webpack-runtime-fe05bbab78f5d4fce435.js" async></script><script src="/framework-19cbca010d802df90a2c.js" async></script><script src="/app-eb4a8bd7a4c504a0ca8d.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>